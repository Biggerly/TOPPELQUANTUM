<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop | Toppel Quantum | Premium Products & Services</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
         :root {
  --primary-color: #2F3A1E;      /* Deep Olive Green */
  --accent-color: #C62828;       /* Deep Red (used sparingly) */
  --background-light: #FFFFFF;   /* White */
  --background-muted: #F7F7F7;   /* Off-white */
  --text-primary: #1E1E1E;       /* Near black */
  --text-secondary: #333333;     /* Dark gray */
  --gold: #E4B461;               /* Keeping gold for some accents */
  --white: #FFFFFF;
  --light-gray: #F8F8F8;
  --gray: #777777;
  --dark-gray: #333333;
  
  /* ADD THESE MISSING VARIABLES: */
  --navy: #2F3A1E;              /* Map old navy to new primary color */
  --purple: #5A4B9C;            /* Keep purple for some accents or replace */
  --beige: #F7F7F7;             /* Map to muted background */
  --peach: #F4F4F4;             /* Light gray variant */
}

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--white);
            color: var(--navy);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
         /* Header & Navigation */
        header {
            background-color: var(--navy);
            padding: 15px 0;
            box-shadow: 0 4px 12px rgba(42, 39, 80, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: 'Playfair Display', serif;
            font-size: 28px;
            font-weight: 700;
            color: var(--white);
            display: flex;
            align-items: center;
        }

        .logo span {
            color: var(--gold);
        }

        .logo i {
            margin-right: 10px;
            font-size: 24px;
            color: var(--gold);
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 30px;
            position: relative;
        }

        nav ul li a {
            color: var(--white);
            text-decoration: none;
            font-weight: 500;
            font-size: 16px;
            transition: color 0.3s;
            display: flex;
            align-items: center;
        }

        nav ul li a:hover {
            color: var(--gold);
        }

        nav ul li a i {
            margin-right: 8px;
            font-size: 18px;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: var(--white);
            min-width: 220px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            border-radius: 5px;
            padding: 10px 0;
            z-index: 1;
            top: 100%;
            left: 0;
        }

        .dropdown-content a {
            color: var(--navy);
            padding: 12px 20px;
            display: block;
            border-bottom: 1px solid #eee;
        }

        .dropdown-content a:last-child {
            border-bottom: none;
        }

        .dropdown-content a:hover {
            background-color: var(--beige);
            color: var(--purple);
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .header-actions {
            display: flex;
            align-items: center;
        }

        .search-bar {
            position: relative;
            margin-right: 20px;
        }

        .search-bar input {
            padding: 10px 15px 10px 40px;
            border-radius: 25px;
            border: 1px solid #ddd;
            width: 250px;
            font-size: 14px;
            background-color: rgba(255, 255, 255, 0.9);
        }

        .search-bar i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }

        .cart-icon, .user-icon {
            color: var(--white);
            font-size: 20px;
            margin-left: 20px;
            cursor: pointer;
            transition: color 0.3s;
        }

        .cart-icon:hover, .user-icon:hover {
            color: var(--gold);
        }

        .cart-count {
            background-color: var(--gold);
            color: var(--navy);
            font-size: 12px;
            font-weight: 600;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            top: -8px;
            right: -8px;
        }

        .mobile-menu-btn {
            display: none;
            font-size: 24px;
            color: var(--white);
            cursor: pointer;
        }

          @media (max-width: 768px) {
            .header-container {
                flex-wrap: wrap;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            nav {
                display: none;
                width: 100%;
                order: 3;
                margin-top: 20px;
            }
            
            nav.active {
                display: block;
            }
            
            nav ul {
                flex-direction: column;
            }
            
            nav ul li {
                margin: 10px 0;
            }
            
            .search-bar input {
                width: 200px;
            }
            
            .hero h1 {
                font-size: 32px;
            }
            
            .hero p {
                font-size: 18px;
            }
            
            .hero-btns {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
            
            .section-title {
                font-size: 30px;
            }
        }

        @media (max-width: 360px) {
            .hero {
                padding: 70px 0;
            }
            
            .hero h1 {
                font-size: 28px;
            }
            
            .category-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .item-grid {
                grid-template-columns: 1fr;
            }
            
            .search-bar {
                display: none;
            }
            
            .tab-btn {
                padding: 10px 15px;
                font-size: 16px;
            }
        }
             .search-icon-mobile {
    display: none;
    color: var(--white);
    font-size: 20px;
    cursor: pointer;
    margin-left: 15px;
    transition: color 0.3s;
}

.search-icon-mobile:hover {
    color: var(--gold);
}

@media (max-width: 1200px) {
    .header-container {
        display: grid;
        grid-template-columns: auto 1fr auto;
        align-items: center;
        gap: 15px;
    }
    
    .mobile-menu-btn {
        display: flex;
        order: 1;
        justify-content: flex-start;
    }
    
    .logo {
        order: 2;
        justify-content: center;
        text-align: center;
        font-size: 24px;
    }
    
    .header-actions {
        order: 3;
        justify-content: flex-end;
        margin-right: 0;
    }
    
    /* Hide full search bar on mobile */
    .search-bar {
        display: none;
    }
    
    /* Show search icon in header actions */
    .search-icon-mobile {
        display: block;
    }
    
    /* Show expanded search when icon is clicked */
    .search-bar.active {
        display: block;
        grid-column: 1 / span 3;
        order: 4;
        margin-top: 15px;
        width: 100%;
    }
    
    .search-bar.active input {
        width: 100%;
    }
    
    /* Navigation menu positioning */
    nav {
        position: absolute;
        top: 100%;
        left: 0;
        width: 100%;
        background-color: var(--navy);
        padding: 20px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        z-index: 999;
        display: none;
        order: 5;
    }
    
    nav.active {
        display: block;
    }
    
    nav ul {
        flex-direction: column;
    }
    
    nav ul li {
        margin: 10px 0;
    }
    
    .dropdown-content {
        position: static;
        box-shadow: none;
        background-color: rgba(255, 255, 255, 0.05);
        margin-top: 10px;
        margin-left: 20px;
    }
    
    .dropdown-content a {
        color: var(--beige);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .dropdown-content a:hover {
        background-color: rgba(255, 255, 255, 0.1);
    }
    
    .hero h1 {
        font-size: 32px;
    }
    
    .hero p {
        font-size: 18px;
    }
    
    .hero-btns {
        flex-direction: column;
        align-items: center;
        gap: 15px;
    }
    
    .section-title {
        font-size: 30px;
    }
}

/* Search Overlay */
.search-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(42, 39, 80, 0.95);
    z-index: 2000;
    overflow-y: auto;
    padding: 20px;
}

.search-overlay.active {
    display: block;
}

.search-overlay-content {
    background-color: var(--white);
    border-radius: 20px;
    max-width: 1000px;
    margin: 40px auto;
    padding: 30px;
    box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
    max-height: 80vh;
    display: flex;
    flex-direction: column;
}

.search-overlay-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    padding-bottom: 15px;
    border-bottom: 2px solid var(--beige);
}

.search-overlay-header h3 {
    font-family: 'Playfair Display', serif;
    font-size: 28px;
    color: var(--navy);
}

.close-search {
    background: none;
    border: none;
    font-size: 24px;
    color: var(--gray);
    cursor: pointer;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
}

.close-search:hover {
    background-color: var(--beige);
    color: var(--navy);
}

.search-input-container {
    position: relative;
    margin-bottom: 30px;
}

.search-input-container i {
    position: absolute;
    left: 20px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--purple);
    font-size: 20px;
}

#overlay-search {
    width: 100%;
    padding: 18px 20px 18px 60px;
    border-radius: 15px;
    border: 2px solid var(--beige);
    font-size: 18px;
    background-color: var(--light-gray);
    transition: all 0.3s;
}

#overlay-search:focus {
    outline: none;
    border-color: var(--purple);
    background-color: var(--white);
    box-shadow: 0 5px 15px rgba(90, 75, 156, 0.1);
}

.search-results {
    flex: 1;
    overflow-y: auto;
    padding-right: 10px;
}

.search-results-placeholder {
    text-align: center;
    padding: 60px 20px;
    color: var(--gray);
}

.search-results-placeholder i {
    font-size: 60px;
    color: var(--beige);
    margin-bottom: 20px;
}

.search-results-placeholder p {
    font-size: 18px;
}

.search-results-list {
    display: none;
}

.search-result-item {
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 15px;
    background-color: var(--light-gray);
    border-left: 4px solid var(--purple);
    transition: all 0.3s;
    cursor: pointer;
    display: flex;
    align-items: center;
}

.search-result-item:hover {
    background-color: var(--beige);
    transform: translateX(5px);
}

.search-result-icon {
    width: 50px;
    height: 50px;
    background-color: var(--purple);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 20px;
    color: var(--white);
    font-size: 20px;
}

.search-result-info h4 {
    font-size: 18px;
    color: var(--navy);
    margin-bottom: 5px;
}

.search-result-info p {
    color: var(--gray);
    font-size: 14px;
}

.search-result-price {
    margin-left: auto;
    font-weight: 600;
    color: var(--purple);
    font-size: 18px;
}

.search-result-category {
    display: inline-block;
    background-color: var(--gold);
    color: var(--navy);
    padding: 4px 10px;
    border-radius: 15px;
    font-size: 12px;
    font-weight: 600;
    margin-top: 5px;
}

/* Make search icon in header clickable */
.search-bar i,
.search-icon-mobile {
    cursor: pointer;
}

/* Remove the old mobile search active styles since we're using overlay now */
.search-bar.active {
    display: none !important;
}

/* Update the desktop search to show on desktop only */
@media (min-width: 1201px) {
    .search-bar {
        display: block !important;
    }
    
    .search-icon-mobile {
        display: none !important;
    }
}

@media (max-width: 1200px) {
    .search-bar {
        display: none;
    }
    
    .search-icon-mobile {
        display: block;
    }
}

/* Cart Overlay Styles */
.cart-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(42, 39, 80, 0.95);
    z-index: 2000;
    overflow-y: auto;
    padding: 20px;
}

.cart-overlay.active {
    display: block;
}

.cart-overlay-content {
    background-color: var(--white);
    border-radius: 20px;
    max-width: 800px;
    margin: 40px auto;
    padding: 30px;
    box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
    max-height: 85vh;
    display: flex;
    flex-direction: column;
}

.cart-overlay-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    padding-bottom: 15px;
    border-bottom: 2px solid var(--beige);
}

.cart-overlay-header h3 {
    font-family: 'Playfair Display', serif;
    font-size: 28px;
    color: var(--navy);
    display: flex;
    align-items: center;
    gap: 10px;
}

.cart-overlay-header h3 i {
    color: var(--purple);
}

.close-cart {
    background: none;
    border: none;
    font-size: 24px;
    color: var(--gray);
    cursor: pointer;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
}

.close-cart:hover {
    background-color: var(--beige);
    color: var(--navy);
}

.cart-items {
    flex: 1;
    overflow-y: auto;
    margin-bottom: 30px;
    padding-right: 10px;
}

.empty-cart-message {
    text-align: center;
    padding: 60px 20px;
    color: var(--gray);
}

.empty-cart-message i {
    font-size: 60px;
    color: var(--beige);
    margin-bottom: 20px;
}

.empty-cart-message p {
    font-size: 20px;
    margin-bottom: 20px;
    color: var(--navy);
}

.cart-item {
    display: flex;
    align-items: center;
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 15px;
    background-color: var(--light-gray);
    border-left: 4px solid var(--gold);
    transition: all 0.3s;
}

.cart-item:hover {
    background-color: var(--beige);
}

.cart-item-image {
    width: 80px;
    height: 80px;
    border-radius: 10px;
    overflow: hidden;
    margin-right: 20px;
    flex-shrink: 0;
}

.cart-item-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.cart-item-details {
    flex: 1;
}

.cart-item-details h4 {
    font-size: 18px;
    color: var(--navy);
    margin-bottom: 5px;
}

.cart-item-category {
    display: inline-block;
    background-color: var(--purple);
    color: var(--white);
    padding: 3px 8px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 600;
    margin-bottom: 5px;
}

.cart-item-price {
    font-weight: 600;
    color: var(--navy);
    font-size: 18px;
}

.cart-item-actions {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
}

.cart-item-quantity {
    display: flex;
    align-items: center;
    gap: 10px;
}

.quantity-btn {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background-color: var(--navy);
    color: var(--white);
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    transition: all 0.3s;
}

.quantity-btn:hover {
    background-color: var(--purple);
}

.quantity-value {
    font-weight: 600;
    min-width: 30px;
    text-align: center;
}

.remove-item {
    background: none;
    border: none;
    color: #ff6b6b;
    cursor: pointer;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 5px;
    transition: color 0.3s;
}

.remove-item:hover {
    color: #ff5252;
}

.cart-summary {
    border-top: 2px solid var(--beige);
    padding-top: 20px;
}

.cart-totals {
    margin-bottom: 25px;
}

.cart-total-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
    font-size: 16px;
    color: var(--navy);
}

.cart-total-row.total {
    font-size: 22px;
    font-weight: 700;
    color: var(--navy);
    border-top: 2px solid var(--beige);
    padding-top: 10px;
    margin-top: 10px;
}

.cart-actions {
    display: flex;
    gap: 15px;
}

.checkout-btn {
    flex: 2;
}

.continue-shopping {
    flex: 1;
    background-color: transparent;
    color: var(--purple);
    border: 2px solid var(--purple);
}

.continue-shopping:hover {
    background-color: var(--purple);
    color: var(--white);
}

/* Make cart icon clickable */
.cart-icon {
    cursor: pointer;
}

/* Responsive adjustments for cart */
@media (max-width: 768px) {
    .cart-overlay-content {
        margin: 20px auto;
        padding: 20px;
    }
    
    .cart-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
    }
    
    .cart-item-image {
        width: 100%;
        height: 150px;
        margin-right: 0;
    }
    
    .cart-item-actions {
        flex-direction: row;
        justify-content: space-between;
        width: 100%;
    }
    
    .cart-actions {
        flex-direction: column;
    }
}

/* Cart Notification Styles */
@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOut {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(100%);
        opacity: 0;
    }
}

.cart-notification {
    position: fixed;
    top: 100px;
    right: 20px;
    background-color: var(--navy);
    color: var(--white);
    padding: 15px 25px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    z-index: 3000;
    animation: slideIn 0.3s ease-out;
    border-left: 4px solid var(--gold);
}

.cart-notification-content {
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 500;
}































        /* Shop Hero */
        .shop-hero {
            background: linear-gradient(135deg, var(--navy) 0%, var(--purple) 100%);
            color: var(--white);
            padding: 80px 0;
            text-align: center;
            margin-bottom: 40px;
        }

        .shop-hero h1 {
            font-family: 'Playfair Display', serif;
            font-size: 48px;
            margin-bottom: 15px;
        }

        .shop-hero p {
            font-size: 18px;
            max-width: 700px;
            margin: 0 auto 30px;
            color: var(--beige);
        }

        .breadcrumb {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            margin-top: 30px;
        }

        .breadcrumb a {
            color: var(--beige);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            color: var(--gold);
        }

        .breadcrumb .separator {
            color: var(--gold);
        }

        /* Shop Layout */
        .shop-container {
            padding: 20px 0 80px;
            margin: auto;
        }

        /* Filters Sidebar */
       

        .filter-section {
            margin-bottom: 30px;
            padding-bottom: 25px;
            border-bottom: 1px solid var(--beige);
        }

        .filter-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .filter-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--navy);
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .filter-content {
            max-height: 500px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .filter-content.collapsed {
            max-height: 0;
        }

        .category-list {
            list-style: none;
        }

        .category-item {
            margin-bottom: 12px;
            display: flex;
            align-items: center;
        }

        .category-item:last-child {
            margin-bottom: 0;
        }

        .category-checkbox {
            display: none;
        }

        .category-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-size: 14px;
            color: var(--gray);
            transition: color 0.3s;
            flex: 1;
        }

        .category-label:hover {
            color: var(--purple);
        }

        .category-checkbox:checked + .category-label {
            color: var(--purple);
            font-weight: 600;
        }

        .custom-checkbox {
            width: 18px;
            height: 18px;
            border: 2px solid var(--beige);
            border-radius: 4px;
            margin-right: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .category-checkbox:checked + .category-label .custom-checkbox {
            background-color: var(--purple);
            border-color: var(--purple);
        }

        .custom-checkbox:after {
            content: 'âœ“';
            color: var(--white);
            font-size: 12px;
            display: none;
        }

        .category-checkbox:checked + .category-label .custom-checkbox:after {
            display: block;
        }

        .category-count {
            background: var(--light-gray);
            color: var(--gray);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 12px;
        }

        /* Price Range */
        .price-range {
            margin-top: 20px;
        }

        .price-inputs {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .price-input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid var(--beige);
            border-radius: 8px;
            font-size: 14px;
        }

        .price-slider {
            width: 100%;
            height: 4px;
            background: var(--beige);
            border-radius: 2px;
            position: relative;
            margin: 20px 0;
        }

        .price-slider .progress {
            height: 100%;
            left: 0%;
            right: 0%;
            position: absolute;
            border-radius: 2px;
            background: var(--purple);
        }

        .range-input {
            position: absolute;
            width: 100%;
            height: 4px;
            top: -5px;
            background: none;
            pointer-events: none;
            -webkit-appearance: none;
        }

        .range-input::-webkit-slider-thumb {
            height: 17px;
            width: 17px;
            border-radius: 50%;
            background: var(--purple);
            pointer-events: auto;
            -webkit-appearance: none;
        }

        /* Rating Filter */
        .rating-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .rating-option {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .stars {
            color: #FFD700;
            font-size: 14px;
            margin-right: 10px;
        }

        .rating-label {
            font-size: 14px;
            color: var(--gray);
        }

        /* Shop Main Content */
       

        /* Shop Header */
        .shop-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            background: var(--white);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
        }

        .shop-sort {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sort-select {
            padding: 10px 15px;
            border: 1px solid var(--beige);
            border-radius: 8px;
            background: var(--white);
            color: var(--navy);
            font-size: 14px;
            cursor: pointer;
        }

        .view-toggle {
            display: flex;
            gap: 10px;
        }

        .view-btn {
            width: 40px;
            height: 40px;
            border: 1px solid var(--beige);
            border-radius: 8px;
            background: var(--white);
            color: var(--gray);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .view-btn.active {
            background: var(--purple);
            color: var(--white);
            border-color: var(--purple);
        }

        .view-btn:hover:not(.active) {
            border-color: var(--purple);
            color: var(--purple);
        }

        .results-count {
            font-size: 14px;
            color: var(--gray);
        }

        /* Products Grid */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* Always 2 columns */
            gap: 25px;
            margin: 0 10px;
            margin-bottom: 50px;
        }

        .product-card {
            background: var(--white);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.03);
            width: 100%;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .product-image {
            position: relative;
            height: 180px;
            overflow: hidden;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .product-card:hover .product-image img {
            transform: scale(1.05);
        }

        .product-badges {
            position: absolute;
            top: 15px;
            left: 15px;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .product-badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-new {
            background: var(--purple);
            color: var(--white);
        }

        .badge-sale {
            background: var(--gold);
            color: var(--navy);
        }

        .badge-bestseller {
            background: #ff6b6b;
            color: var(--white);
        }

        .quick-actions {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            opacity: 0;
            transform: translateX(10px);
            transition: all 0.3s ease;
        }

        .product-card:hover .quick-actions {
            opacity: 1;
            transform: translateX(0);
        }

        .quick-action-btn {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: var(--white);
            border: none;
            color: var(--navy);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }

        .quick-action-btn:hover {
            background: var(--purple);
            color: var(--white);
            transform: scale(1.1);
        }

        .product-info {
            padding: 20px;
        }

        .product-category {
            display: inline-block;
            color: var(--purple);
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .product-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--navy);
            margin-bottom: 8px;
            line-height: 1.3;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .product-description {
            color: var(--gray);
            font-size: 13px;
            line-height: 1.5;
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .product-rating {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 15px;
        }

        .product-rating .stars {
            font-size: 12px;
        }

        .rating-count {
            font-size: 12px;
            color: var(--gray);
        }

        .product-price {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .current-price {
            font-size: 20px;
            font-weight: 700;
            color: var(--navy);
        }

        .original-price {
            font-size: 15px;
            color: var(--gray);
            text-decoration: line-through;
        }

        .discount {
            background: #ff6b6b;
            color: white;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: 600;
        }

        .product-actions {
            display: flex;
            gap: 10px;
        }

        .add-to-cart-btn, .view-details-btn {
            flex: 1;
            padding: 10px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .add-to-cart-btn {
            background: var(--gold);
            color: var(--navy);
        }

        .add-to-cart-btn:hover {
            background: #d0a04f;
            transform: translateY(-2px);
        }

        .view-details-btn {
            background: var(--purple);
            color: var(--white);
        }

        .view-details-btn:hover {
            background: #4a3d84;
            transform: translateY(-2px);
        }

        /* Products List View */
        .products-list {
            display: none;
            flex-direction: column;
            gap: 20px;
        }

        .products-list.active {
            display: flex;
        }

        .products-grid.active {
            display: grid;
        }

        .products-grid:not(.active) {
            display: none;
        }

        .product-list-item {
            display: grid;
            grid-template-columns: 200px 1fr;
            gap: 25px;
            background: var(--white);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.03);
        }

        .product-list-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .list-image {
            height: 150px;
            border-radius: 10px;
            overflow: hidden;
        }

        .list-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .list-info {
            display: flex;
            flex-direction: column;
        }

        .list-info .product-title {
            font-size: 18px;
            margin-bottom: 10px;
        }

        .list-info .product-description {
            font-size: 14px;
            margin-bottom: 15px;
            -webkit-line-clamp: 3;
        }

        .list-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 40px;
        }

        .page-btn {
            width: 40px;
            height: 40px;
            border: 1px solid var(--beige);
            border-radius: 8px;
            background: var(--white);
            color: var(--navy);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .page-btn:hover:not(.active):not(.disabled) {
            border-color: var(--purple);
            color: var(--purple);
        }

        .page-btn.active {
            background: var(--purple);
            color: var(--white);
            border-color: var(--purple);
        }

        .page-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .page-dots {
            color: var(--gray);
            padding: 0 5px;
        }

        /* Footer */
        footer {
            background-color: var(--navy);
            color: var(--white);
            padding: 60px 0 30px;
        }

        .footer-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-column h3 {
            font-family: 'Playfair Display', serif;
            font-size: 22px;
            margin-bottom: 20px;
            color: var(--gold);
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 12px;
        }

        .footer-column ul li a {
            color: var(--beige);
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-column ul li a:hover {
            color: var(--gold);
        }

        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-icons a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: var(--white);
            font-size: 18px;
            transition: all 0.3s;
        }

        .social-icons a:hover {
            background-color: var(--gold);
            color: var(--navy);
            transform: translateY(-3px);
        }

        .newsletter form {
            display: flex;
            margin-top: 15px;
        }

        .newsletter input {
            flex: 1;
            padding: 12px 15px;
            border: none;
            border-radius: 25px 0 0 25px;
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--white);
        }

        .newsletter input::placeholder {
            color: var(--beige);
        }

        .newsletter button {
            background-color: var(--gold);
            color: var(--navy);
            border: none;
            padding: 0 20px;
            border-radius: 0 25px 25px 0;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .newsletter button:hover {
            background-color: #d0a04f;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--beige);
            font-size: 14px;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .shop-container {
                grid-template-columns: 250px 1fr;
                gap: 30px;
            }
        }

        @media (max-width: 992px) {
            .shop-container {
                grid-template-columns: 1fr;
            }
            
           
            
            .shop-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .product-list-item {
                grid-template-columns: 150px 1fr;
            }
        }

        @media (max-width: 368px) {
            .header-container {
                flex-wrap: wrap;
            }
            
            nav {
                display: none;
                width: 100%;
                order: 3;
                margin-top: 20px;
            }
            
            nav.active {
                display: block;
            }
            
            nav ul {
                flex-direction: column;
            }
            
            nav ul li {
                margin: 10px 0;
            }
            
            .shop-hero h1 {
                font-size: 36px;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }

        @media (max-width: 576px) {
            .shop-hero {
                padding: 60px 0;
            }
            
            .shop-hero h1 {
                font-size: 32px;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .product-list-item {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .list-image {
                height: 200px;
            }
            
            .product-actions {
                flex-direction: column;
            }
            
            .pagination {
                flex-wrap: wrap;
            }
        }

        /* Mobile Filter Button */
        .mobile-filter-btn {
            display: none;
            padding: 12px 25px;
            background: var(--purple);
            color: var(--white);
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            width: 100%;
            justify-content: center;
        }

        @media (max-width: 992px) {
            .mobile-filter-btn {
                display: flex;
            }
            
            .filters-sidebar {
                display: none;
            }
            
            .filters-sidebar.active {
                display: block;
            }
        }















        /* Shop Tools Section */
.shop-tools-section {
    padding: 40px 0;
    background: var(--white);
    border-bottom: 1px solid var(--beige);
}

/* Shop Search Container */
.shop-search-container {
    max-width: 800px;
    margin: 0 auto 40px;
}

.shop-search-wrapper {
    display: flex;
    background: var(--white);
    border-radius: 50px;
    padding: 5px;
    box-shadow: 0 10px 30px rgba(42, 39, 80, 0.08);
    border: 2px solid var(--beige);
    overflow: hidden;
}

.shop-search-wrapper i:first-child {
    padding: 0 20px;
    color: var(--purple);
    display: flex;
    align-items: center;
    font-size: 18px;
}

.shop-search-input {
    flex: 1;
    border: none;
    padding: 15px 0;
    font-size: 16px;
    background: transparent;
    outline: none;
    color: var(--navy);
}

.shop-search-input::placeholder {
    color: var(--gray);
    opacity: 0.7;
}

.shop-search-btn {
    background: var(--gold);
    color: var(--navy);
    border: none;
    padding: 15px 30px;
    border-radius: 50px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
    display: flex;
    align-items: center;
    gap: 8px;
}

.shop-search-btn:hover {
    background: #d0a04f;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(228, 180, 97, 0.2);
}

/* Popular Categories */
.popular-categories {
    margin-top: 20px;
}

.popular-categories h3 {
    text-align: center;
    color: var(--navy);
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 25px;
}

.categories-container {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
    max-width: 1000px;
    margin: 0 auto;
}

.category-box {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px 15px;
    background: var(--white);
    border-radius: 15px;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid var(--beige);
    text-decoration: none;
}

.category-box:hover {
    background: var(--light-gray);
    transform: translateY(-5px);
    border-color: var(--purple);
    box-shadow: 0 10px 25px rgba(90, 75, 156, 0.1);
}

.category-icon {
    width: 60px;
    height: 60px;
    background: var(--gold);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 15px;
    font-size: 24px;
    color: var(--navy);
    transition: all 0.3s ease;
}

.category-box:hover .category-icon {
    background: var(--purple);
    color: var(--white);
    transform: scale(1.1);
}

.category-box span {
    color: var(--navy);
    font-size: 15px;
    font-weight: 500;
    text-align: center;
    line-height: 1.3;
}

/* Responsive Design */
@media (max-width: 992px) {
    .categories-container {
        grid-template-columns: repeat(3, 1fr);
    }
}

@media (max-width: 768px) {
    .shop-tools-section {
        padding: 30px 0;
    }
    
    .shop-search-wrapper {
        flex-direction: column;
        border-radius: 15px;
        padding: 0;
        overflow: visible;
        gap: 10px;
        border-width: 1px;
    }
    
    .shop-search-wrapper i:first-child {
        display: none;
    }
    
    .shop-search-input {
        padding: 15px;
        border-bottom: 1px solid var(--beige);
    }
    
    .shop-search-btn {
        border-radius: 0 0 15px 15px;
        padding: 15px;
        justify-content: center;
    }
    
    .categories-container {
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
    }
    
    .category-box {
        padding: 15px 10px;
    }
    
    .category-icon {
        width: 50px;
        height: 50px;
        font-size: 20px;
    }
    
    .category-box span {
        font-size: 14px;
    }
}

@media (max-width: 576px) {
    .popular-categories h3 {
        font-size: 18px;
        margin-bottom: 20px;
    }
    
    .categories-container {
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
    }
    
    .category-box {
        padding: 12px 8px;
    }
    
    .category-icon {
        width: 40px;
        height: 40px;
        font-size: 18px;
    }
    
    .category-box span {
        font-size: 13px;
    }
}

@media (max-width: 380px) {
    .categories-container {
        grid-template-columns: 1fr;
        max-width: 250px;
    }
}
/* Shop Tools Section */
.shop-tools-section {
    padding: 30px 0;
    background: var(--white);
}

/* Shop Search Container */
.shop-search-container {
    max-width: 700px;
    margin: 0 auto 30px;
}

.shop-search-wrapper {
    display: flex;
    background: var(--white);
    border-radius: 50px;
    padding: 5px;
    box-shadow: 0 5px 20px rgba(42, 39, 80, 0.08);
    border: 1px solid var(--beige);
    overflow: hidden;
}

.shop-search-wrapper i:first-child {
    padding: 0 18px;
    color: var(--purple);
    display: flex;
    align-items: center;
    font-size: 18px;
}

.shop-search-input {
    flex: 1;
    border: none;
    padding: 12px 0;
    font-size: 15px;
    background: transparent;
    outline: none;
    color: var(--navy);
}

.shop-search-input::placeholder {
    color: var(--gray);
    opacity: 0.7;
}

.shop-search-btn {
    background: var(--gold);
    color: var(--navy);
    border: none;
    padding: 12px 25px;
    border-radius: 50px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
    display: flex;
    align-items: center;
    gap: 8px;
}

.shop-search-btn:hover {
    background: #d0a04f;
    transform: translateY(-1px);
}

/* Category Tabs Container */
.category-tabs-container {
    max-width: 1200px;
    margin: 0 20px;
}

.category-tabs {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 20px;
}

.category-tab {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 18px;
    background: var(--light-gray);
    border: none;
    border-radius: 30px;
    color: var(--gray);
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
    font-size: 14px;
}

.category-tab i {
    font-size: 14px;
}

.category-tab.active {
    background: var(--navy);
    color: white;
}

.category-tab:hover:not(.active) {
    background: rgba(42, 39, 80, 0.1);
    color: var(--navy);
}

/* Responsive Design */
@media (max-width: 768px) {
    .shop-tools-section {
        padding: 25px 0;
    }
    
    .shop-search-wrapper {
        flex-direction: column;
        border-radius: 15px;
        padding: 0;
        overflow: visible;
        gap: 10px;
    }
    
    .shop-search-wrapper i:first-child {
        display: none;
    }
    
    .shop-search-input {
        padding: 15px;
        border-bottom: 1px solid var(--beige);
    }
    
    .shop-search-btn {
        border-radius: 0 0 15px 15px;
        padding: 15px;
        justify-content: center;
    }
    
    .category-tabs {
        justify-content: flex-start;
        overflow-x: auto;
        padding: 10px 0;
        margin: 0 -20px 20px;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: thin;
    }
    
    .category-tabs::-webkit-scrollbar {
        height: 4px;
    }
    
    .category-tabs::-webkit-scrollbar-track {
        background: var(--light-gray);
    }
    
    .category-tabs::-webkit-scrollbar-thumb {
        background: var(--purple);
        border-radius: 2px;
    }
    
    .category-tab {
        flex-shrink: 0;
        padding: 8px 16px;
        font-size: 13px;
    }
}

@media (max-width: 576px) {
    .shop-search-container {
        margin-bottom: 20px;
    }
    
    .category-tabs {
        gap: 6px;
    }
    
    .category-tab {
        padding: 7px 14px;
        font-size: 12px;
    }
}


.product-image {
    position: relative;
    height: 180px; /* Slightly smaller for mobile */
    overflow: hidden;
}

.product-info {
    padding: 15px; /* Slightly smaller padding */
}

.product-title {
    font-size: 15px; /* Slightly smaller font */
    margin-bottom: 6px;
}

.product-description {
    font-size: 12px; /* Smaller font for mobile */
    margin-bottom: 10px;
}

.product-price {
    margin-bottom: 10px;
}

.current-price {
    font-size: 18px; /* Smaller price font */
}

.product-actions {
    display: flex;
    gap: 8px;
}

.add-to-cart-btn, .view-details-btn {
    padding: 8px;
    font-size: 12px;
    gap: 4px;
}

/* Responsive Design - Always keep 2 columns */
@media (max-width: 768px) {
    .products-grid {
        grid-template-columns: repeat(2, 1fr); /* Still 2 columns */
        gap: 12px;
    }
    
    .product-image {
        height: 160px;
    }
    
    .product-title {
        font-size: 14px;
    }
    
    .product-description {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        font-size: 11px;
    }
    
    .current-price {
        font-size: 16px;
    }
}

@media (max-width: 576px) {
    .products-grid {
        grid-template-columns: repeat(2, 1fr); /* Still 2 columns */
        gap: 10px;
    }
    
    .product-image {
        height: 150px;
    }
    
    .product-info {
        padding: 12px;
    }
    
    .product-title {
        font-size: 13px;
    }
    
    .product-description {
        -webkit-line-clamp: 2; /* Show only 2 lines on mobile */
        font-size: 11px;
        line-height: 1.3;
    }
    
    .product-rating {
        margin-bottom: 10px;
    }
    
    .product-price {
        margin-bottom: 12px;
    }
    
    .current-price {
        font-size: 16px;
    }
    
    .product-actions {
        flex-direction: column; /* Stack buttons vertically */
        gap: 6px;
    }
    
    .add-to-cart-btn, .view-details-btn {
        width: 100%;
        padding: 10px;
    }
}

/* For very small screens, adjust spacing but keep 2 columns */
@media (max-width: 380px) {
    .products-grid {
        grid-template-columns: repeat(2, 1fr); /* Still 2 columns */
        gap: 8px;
    }
    
    .product-image {
        height: 140px;
    }
    
    .product-title {
        font-size: 12px;
    }
    
    .product-description {
        display: none; /* Hide description on very small screens */
    }
    
    .current-price {
        font-size: 15px;
    }
    
    .product-actions {
        flex-direction: column;
    }
}

/* Button Styles */
.btn {
    padding: 12px 25px;
    border-radius: 10px;
    font-weight: 600;
    font-size: 16px;
    cursor: pointer;
    border: none;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.btn-gold {
    background-color: var(--gold);
    color: var(--navy);
}

.btn-gold:hover {
    background-color: #d0a04f;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(228, 180, 97, 0.2);
}

.btn-purple {
    background-color: var(--purple);
    color: var(--white);
}

.btn-purple:hover {
    background-color: #4a3d84;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(90, 75, 156, 0.2);
}

.btn-details {
    background-color: transparent;
    color: var(--purple);
    border: 2px solid var(--purple);
}

.btn-details:hover {
    background-color: var(--purple);
    color: var(--white);
}

/* Update existing button styles to use btn classes */
.add-to-cart-btn {
    background: var(--gold);
    color: var(--navy);
    border: none;
    padding: 10px;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 5px;
    flex: 1;
}

.view-details-btn {
    background: var(--purple);
    color: var(--white);
    border: none;
    padding: 10px;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 5px;
    flex: 1;
}
.cart-actions .btn {
    padding: 12px 20px;
    font-size: 16px;
    width: 100%;
}

.cart-actions .checkout-btn {
    background-color: var(--gold);
    color: var(--navy);
}

.cart-actions .continue-shopping {
    background-color: transparent;
    color: var(--purple);
    border: 2px solid var(--purple);
}

.cart-actions .continue-shopping:hover {
    background-color: var(--purple);
    color: var(--white);
}

/* Product Detail Modal */
.product-detail-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(42, 39, 80, 0.95);
    z-index: 3000;
    overflow-y: auto;
    padding: 20px;
    animation: fadeIn 0.3s ease;
}

.product-detail-modal.active {
    display: block;
}

.product-detail-content {
    background-color: var(--white);
    border-radius: 20px;
    max-width: 1200px;
    margin: 40px auto;
    padding: 40px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    position: relative;
    animation: slideUp 0.4s ease;
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(50px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.close-product-modal {
    position: absolute;
    top: 20px;
    right: 20px;
    background: none;
    border: none;
    font-size: 24px;
    color: var(--gray);
    cursor: pointer;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
    z-index: 10;
}

.close-product-modal:hover {
    background-color: var(--beige);
    color: var(--navy);
}

.product-detail-body {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 50px;
    margin-top: 20px;
}

/* Product Images */
.product-detail-images {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.main-image {
    width: 100%;
    height: 400px;
    border-radius: 15px;
    overflow: hidden;
    background: var(--light-gray);
}

.main-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
}

.image-thumbnails {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.thumbnail {
    width: 80px;
    height: 80px;
    border-radius: 10px;
    overflow: hidden;
    cursor: pointer;
    border: 2px solid transparent;
    transition: all 0.3s ease;
}

.thumbnail.active {
    border-color: var(--purple);
}

.thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.thumbnail:hover {
    transform: scale(1.05);
}

/* Product Info */
.product-detail-info {
    display: flex;
    flex-direction: column;
    gap: 25px;
}

.product-detail-header {
    border-bottom: 2px solid var(--beige);
    padding-bottom: 20px;
}

.product-detail-category {
    display: inline-block;
    color: var(--purple);
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.product-detail-header h2 {
    font-family: 'Playfair Display', serif;
    font-size: 32px;
    color: var(--navy);
    margin-bottom: 15px;
    line-height: 1.3;
}

.product-detail-rating {
    display: flex;
    align-items: center;
    gap: 10px;
}

.product-detail-rating .stars {
    color: #FFD700;
    font-size: 16px;
}

.rating-count {
    color: var(--gray);
    font-size: 14px;
}

/* Price */
.product-detail-price {
    display: flex;
    align-items: center;
    gap: 15px;
    margin: 10px 0;
}

.product-detail-price .current-price {
    font-size: 36px;
    font-weight: 700;
    color: var(--navy);
}

.product-detail-price .original-price {
    font-size: 24px;
    color: var(--gray);
    text-decoration: line-through;
}

.product-detail-price .discount {
    background: #ff6b6b;
    color: white;
    padding: 5px 12px;
    border-radius: 15px;
    font-size: 14px;
    font-weight: 600;
}

/* Description & Features */
.product-detail-description h3,
.product-detail-features h3,
.product-detail-specs h3 {
    font-size: 20px;
    color: var(--navy);
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--beige);
}

.product-detail-description p {
    color: var(--gray);
    line-height: 1.8;
    font-size: 16px;
}

.product-detail-features ul {
    list-style: none;
    padding-left: 20px;
}

.product-detail-features li {
    color: var(--gray);
    margin-bottom: 10px;
    padding-left: 25px;
    position: relative;
    font-size: 15px;
}

.product-detail-features li:before {
    content: 'âœ“';
    position: absolute;
    left: 0;
    color: var(--purple);
    font-weight: bold;
}

/* Specifications */
.specs-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
}

.spec-item {
    display: flex;
    justify-content: space-between;
    padding: 12px;
    background: var(--light-gray);
    border-radius: 8px;
    border-left: 3px solid var(--purple);
}

.spec-label {
    font-weight: 600;
    color: var(--navy);
    font-size: 14px;
}

.spec-value {
    color: var(--gray);
    font-size: 14px;
}

/* Action Buttons */
.product-detail-actions {
    background: var(--light-gray);
    padding: 25px;
    border-radius: 15px;
    margin: 20px 0;
}

.quantity-selector {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
}

.quantity-selector label {
    font-weight: 600;
    color: var(--navy);
    font-size: 16px;
}

.quantity-control {
    display: flex;
    align-items: center;
    gap: 10px;
}

.qty-minus,
.qty-plus {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: var(--navy);
    color: var(--white);
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    transition: all 0.3s;
}

.qty-minus:hover,
.qty-plus:hover {
    background: var(--purple);
}

#quantity {
    width: 60px;
    height: 40px;
    text-align: center;
    border: 2px solid var(--beige);
    border-radius: 8px;
    font-size: 18px;
    font-weight: 600;
    color: var(--navy);
}

.action-buttons {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
}

.action-buttons .btn {
    padding: 15px;
    font-size: 16px;
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.wishlist-modal:hover {
    background: #ff6b6b;
    color: white;
    border-color: #ff6b6b;
}

/* Product Meta */
.product-detail-meta {
    display: flex;
    justify-content: space-between;
    margin-top: 30px;
    padding-top: 20px;
    border-top: 2px solid var(--beige);
}

.meta-item {
    display: flex;
    align-items: center;
    gap: 10px;
    color: var(--gray);
    font-size: 14px;
}

.meta-item i {
    color: var(--purple);
    font-size: 16px;
}

/* Responsive Design */
@media (max-width: 992px) {
    .product-detail-body {
        grid-template-columns: 1fr;
        gap: 30px;
    }
    
    .main-image {
        height: 350px;
    }
    
    .action-buttons {
        grid-template-columns: 1fr;
    }
    
    .product-detail-meta {
        flex-direction: column;
        gap: 15px;
    }
}

@media (max-width: 768px) {
    .product-detail-content {
        padding: 20px;
        margin: 20px auto;
    }
    
    .product-detail-header h2 {
        font-size: 24px;
    }
    
    .product-detail-price .current-price {
        font-size: 28px;
    }
    
    .specs-grid {
        grid-template-columns: 1fr;
    }
    
    .action-buttons .btn {
        padding: 12px;
        font-size: 14px;
    }
}

@media (max-width: 576px) {
    .product-detail-body {
        gap: 20px;
    }
    
    .main-image {
        height: 250px;
    }
    
    .product-detail-price {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }
    
    .quantity-selector {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
    }
}

/* Pagination animations */
.products-grid {
    position: relative;
    min-height: 800px; /* Ensure space for product cards */
}

.product-card {
    transition: all 0.4s ease;
}

/* Pagination active state animation */
.page-btn {
    transition: all 0.3s ease;
}

.page-btn:hover:not(.active):not(.disabled) {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(90, 75, 156, 0.2);
}

.page-btn.active {
    transform: scale(1.1);
    box-shadow: 0 5px 15px rgba(90, 75, 156, 0.3);
}

/* Loading animation for page changes */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.product-card.fade-in {
    animation: fadeInUp 0.4s ease forwards;
}
/* Add these styles to your CSS section */

/* List View Improvements */
.product-list-item .product-rating {
    display: flex;
    align-items: center;
    gap: 5px;
    margin-bottom: 15px;
}

.product-list-item .product-rating .stars {
    font-size: 12px;
    color: #FFD700;
}

.product-list-item .product-rating .rating-count {
    font-size: 12px;
    color: var(--gray);
}

.product-list-item .product-price {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 15px;
}

.product-list-item .product-actions {
    display: flex;
    gap: 10px;
}

.product-list-item .add-to-cart-btn,
.product-list-item .view-details-btn {
    flex: 1;
    padding: 10px;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    border: none;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 5px;
}

.product-list-item .add-to-cart-btn {
    background: var(--gold);
    color: var(--navy);
}

.product-list-item .add-to-cart-btn:hover {
    background: #d0a04f;
    transform: translateY(-2px);
}

.product-list-item .view-details-btn {
    background: var(--purple);
    color: var(--white);
}

.product-list-item .view-details-btn:hover {
    background: #4a3d84;
    transform: translateY(-2px);
}

/* Responsive list view */
@media (max-width: 768px) {
    .product-list-item {
        grid-template-columns: 150px 1fr;
        gap: 15px;
        padding: 15px;
    }
    
    .list-image {
        height: 120px;
    }
    
    .product-list-item .product-title {
        font-size: 16px;
    }
    
    .product-list-item .product-description {
        font-size: 13px;
    }
    
    .product-list-item .product-actions {
        flex-direction: column;
    }
}

@media (max-width: 576px) {
    .product-list-item {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    
    .list-image {
        height: 200px;
    }
}




/* Products List View - Make sure these styles are present */
.products-list {
    display: none;
    flex-direction: column;
    gap: 20px;
    margin-bottom: 50px;
}

.products-list.active {
    display: flex;
}

.products-grid.active {
    display: grid;
}

.products-grid:not(.active) {
    display: none;
}

.product-list-item {
    display: grid;
    grid-template-columns: 200px 1fr;
    gap: 25px;
    background: var(--white);
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
    transition: all 0.3s ease;
    border: 1px solid rgba(0, 0, 0, 0.03);
}

.product-list-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
}

.list-image {
    height: 150px;
    border-radius: 10px;
    overflow: hidden;
}

.list-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.list-info {
    display: flex;
    flex-direction: column;
}

.list-info .product-title {
    font-size: 18px;
    margin-bottom: 10px;
}

.list-info .product-description {
    font-size: 14px;
    margin-bottom: 15px;
    -webkit-line-clamp: 3;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.list-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: auto;
}

.list-meta .product-price {
    margin-bottom: 0;
}

/* Responsive list view */
@media (max-width: 768px) {
    .product-list-item {
        grid-template-columns: 150px 1fr;
        gap: 15px;
        padding: 15px;
    }
    
    .list-image {
        height: 120px;
    }
    
    .product-list-item .product-title {
        font-size: 16px;
    }
    
    .product-list-item .product-description {
        font-size: 13px;
    }
}

@media (max-width: 576px) {
    .product-list-item {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    
    .list-image {
        height: 200px;
    }
}


.ebassgroup {
    color: #F4E8DA;
}










/* Update container styles */
.container {
    max-width: 1400px; /* Changed from 100% */
    margin: 0 auto;
    padding: 0 20px;
    width: 100%;
}

/* For larger screens */
@media (min-width: 1600px) {
    .container {
        max-width: 1500px;
    }
}

@media (min-width: 1800px) {
    .container {
        max-width: 1700px;
    }
}



/* Base font size for desktop */
@media (min-width: 1200px) {
    body {
        font-size: 16px;
    }
    
    .hero h1,
    .slide-content h1 {
        font-size: 3.5rem; /* ~56px */
    }
    
    .section-title {
        font-size: 2.5rem; /* ~40px */
    }
    
    .product-title,
    .carousel-title {
        font-size: 1.2rem; /* ~19px */
    }
}

/* For very large screens */
@media (min-width: 1600px) {
    body {
        font-size: 18px;
    }
    
    .hero h1,
    .slide-content h1 {
        font-size: 4rem; /* ~64px */
    }
    
    .section-title {
        font-size: 2.8rem; /* ~45px */
    }
}

/* Products grid */
.products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 30px;
    margin-bottom: 40px;
    max-width: 1400px;
    margin-left: auto;
    margin-right: auto;
}

/* For larger screens */
@media (min-width: 1600px) {
    .products-grid {
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        max-width: 1500px;
    }
}

/* Hero slider adjustments */
.hero-slider {
    position: relative;
    height: 70vh; /* Changed from 600px */
    max-height: 700px; /* Maximum height */
    margin-bottom: 60px;
    border-radius: 0 0 30px 30px;
    overflow: hidden;
}

@media (min-width: 1600px) {
    .hero-slider {
        height: 65vh;
        max-height: 750px;
    }
}

/* Scale control for very large screens */
@media (min-width: 1920px) {
    :root {
        font-size: 0.9em; /* Scales everything down by 10% */
    }
}

@media (min-width: 2560px) {
    :root {
        font-size: 0.8em; /* Scales everything down by 20% */
    }
}

/* Header container fix */
.header-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 20px;
    width: 100%;
}



/* Force specific aspect ratio (wider) */
.logo img {
    width: 250px; /* Width */
    height: 65px; /* Height */
    object-fit: cover; /* Fills the area, may crop */
    border-radius: 40px;
}



/* SUPER SIMPLE FIX */
@media (min-width: 768px) { html { zoom: 0.80; } } /* Desktop/iPad smaller */
@media (max-width: 767px) and (min-width: 360px) { html { zoom: 0.70; } } /* Medium mobile smaller */
@media (max-width: 399px) { 
    .container { padding: 0 10px !important; }
    .hero-slider { height: 300px !important; }
}




/* QUICK OVERRIDES FOR OLD COLOR VARIABLES */
:root {
  --navy: var(--primary-color);     /* Map old navy to new olive green */
  --purple: #5A4B9C;                /* Keep or adjust as needed */
  --beige: var(--background-muted); /* Off-white */
  --peach: var(--light-gray);       /* Light gray */
}

/* Force update specific elements */
header,
.sell-section,
footer,
.search-overlay,
.cart-overlay,
.item-modal,
.help-section,
.banner-overlay,
.category-overlay {
    background-color: var(--primary-color) !important;
}

/* Update text colors */
.hero h1,
.hero p,
.slide-content h1,
.slide-content p,
.sell-section h2,
.sell-section p,
.footer-column p,
.help-content h2,
.banner-content h2,
.banner-content p {
    color: var(--white) !important;
}

/* Update section backgrounds */
.sell-section,
.help-section {
    background: var(--primary-color) !important;
}

/* Update overlay backgrounds */
.search-overlay,
.cart-overlay,
.item-modal {
    background-color: rgba(47, 58, 30, 0.95) !important; /* Dark olive overlay */
}












































    </style>
</head>
<body>
    <!-- Header -->
     <!-- Header -->
    <header>
        <div class="container header-container">
            <div class="logo">
    <img src="images/toppel-quantum-logo.png" alt="Toppel Quantum Logo">
</div>

            
            <div class="mobile-menu-btn">
                <i class="fas fa-bars"></i>
            </div>
            
            <nav>
                <ul>
                    <li><a href="index.html"><i class="fas fa-home"></i>Home</a></li>
                    <li>
                        <a href="shop.html"><i class="fas fa-store"></i>Shop</a>
                    </li>
                    
                    <li><a href="services.html"><i class="fas fa-handshake"></i>Services</a></li>
                    <li><a href="affiliates.html"><i class="fas fa-user-plus"></i>Affiliates</a></li>
                    <li><a href="about.html"><i class="fas fa-info-circle"></i>About</a></li>
                    <li><a href="contact.html"><i class="fas fa-envelope"></i>Contact</a></li>
                </ul>
            </nav>
            
            <div class="header-actions">
    <div class="search-bar">
        <i class="fas fa-search"></i>
        <input type="text" placeholder="Search products, services...">
    </div>
    <!-- Add this mobile search icon -->
    <div class="search-icon-mobile">
        <i class="fas fa-search"></i>
    </div>
    <div style="position: relative;">
        <i class="fas fa-shopping-cart cart-icon"></i>
        <span class="cart-count">3</span>
    </div>
    <i class="fas fa-user user-icon"></i>
</div>
        </div>
    </header>






<!-- Search Overlay -->
<div class="search-overlay">
    <div class="search-overlay-content">
        <div class="search-overlay-header">
            <h3>Search Results</h3>
            <button class="close-search">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="search-input-container">
            <i class="fas fa-search"></i>
            <input type="text" id="overlay-search" placeholder="Search products, services, categories...">
        </div>
        <div class="search-results">
            <div class="search-results-placeholder">
                <i class="fas fa-search"></i>
                <p>Type to search for products, services.</p>
            </div>
            <div class="search-results-list">
                <!-- Search results will appear here -->
            </div>
        </div>
    </div>
</div>


<!-- End Search Overlay -->

<!-- Cart Overlay -->
<div class="cart-overlay">
    <div class="cart-overlay-content">
        <div class="cart-overlay-header">
            <h3><i class="fas fa-shopping-cart"></i> Your Cart</h3>
            <button class="close-cart">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="cart-items">
            <div class="empty-cart-message">
                <i class="fas fa-shopping-basket"></i>
                <p>Your cart is empty</p>
                <a href="shop.html" class="btn btn-purple">Start Shopping</a>
            </div>
            <!-- Cart items will be added here dynamically -->
        </div>
        
        <div class="cart-summary">
            <div class="cart-totals">
                <div class="cart-total-row">
                    <span>Subtotal:</span>
                    <span class="cart-subtotal">â‚¦0.00</span>
                </div>
                <!-- <div class="cart-total-row">
                    <span>Shipping:</span>
                    <span class="cart-shipping">Calculated at checkout</span>
                </div> -->
                <div class="cart-total-row total">
                    <span>Total:</span>
                    <span class="cart-total">â‚¦0.00</span>
                </div>
            </div>
            <div class="cart-actions">
    <button class="btn btn-gold checkout-btn" id="proceed-to-checkout">
        <i class="fas fa-shopping-bag"></i> Proceed to Checkout
    </button>
    <button class="btn btn-details continue-shopping">
        <i class="fas fa-shopping-cart"></i> Continue Shopping
    </button>
</div>
        </div>
    </div>
</div>

<!-- Product Detail Modal -->
<div class="product-detail-modal">
    <div class="product-detail-content">
        <button class="close-product-modal">
            <i class="fas fa-times"></i>
        </button>
        
        <div class="product-detail-body">
            <div class="product-detail-images">
                <div class="main-image">
                    <img id="modal-main-image" src="" alt="Product Image">
                </div>
                <div class="image-thumbnails">
                    <!-- Thumbnails will be added dynamically -->
                </div>
            </div>
            
            <div class="product-detail-info">
                <div class="product-detail-header">
                    <span class="product-detail-category" id="modal-category"></span>
                    <h2 id="modal-title"></h2>
                    <div class="product-detail-rating" id="modal-rating">
                        <div class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                        </div>
                        <span class="rating-count">(4.5) â€¢ 128 reviews</span>
                    </div>
                </div>
                
                <div class="product-detail-price" id="modal-price">
                    <span class="current-price">â‚¦49.99</span>
                    <span class="original-price">â‚¦64.99</span>
                    <span class="discount">23% off</span>
                </div>
                
                <div class="product-detail-description">
                    <h3>Description</h3>
                    <p id="modal-description"></p>
                </div>
                
                <div class="product-detail-features">
                    <h3>Features</h3>
                    <ul id="modal-features">
                        <!-- Features will be added dynamically -->
                    </ul>
                </div>
                
                <div class="product-detail-specs">
                    <h3>Specifications</h3>
                    <div class="specs-grid" id="modal-specs">
                        <!-- Specs will be added dynamically -->
                    </div>
                </div>
                
                <div class="product-detail-actions">
                    <div class="quantity-selector">
                        <label for="quantity">Quantity:</label>
                        <div class="quantity-control">
                            <button class="qty-minus"><i class="fas fa-minus"></i></button>
                            <input type="number" id="quantity" value="1" min="1" max="10">
                            <button class="qty-plus"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn btn-gold add-to-cart-modal">
                            <i class="fas fa-cart-plus"></i> Add to Cart
                        </button>
                        <button class="btn btn-purple buy-now-modal">
                            <i class="fas fa-bolt"></i> Buy Now
                        </button>
                        <button class="btn btn-details wishlist-modal">
                            <i class="far fa-heart"></i> Wishlist
                        </button>
                    </div>
                </div>
                
                <div class="product-detail-meta">
                    <div class="meta-item">
                        <i class="fas fa-shipping-fast"></i>
                        <span>Free shipping on orders over â‚¦50</span>
                    </div>
                    <div class="meta-item">
                        <i class="fas fa-undo"></i>
                        <span>30-day return policy</span>
                    </div>
                    <div class="meta-item">
                        <i class="fas fa-shield-alt"></i>
                        <span>Secure checkout</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>





























   <!-- Shop Hero -->
<!-- Shop Hero -->
<section class="shop-hero">
    <div class="container">
        <h1>Shop Toppel Quantum</h1>
        <p>Discover our curated collection of premium products and services</p>
        <div class="breadcrumb">
            <a href="index.html">Home</a>
            <span class="separator"><i class="fas fa-chevron-right"></i></span>
            <span>Shop</span>
        </div>
    </div>
</section>

<!-- Shop Search & Categories -->
<section class="shop-tools-section">
    <div class="container">
        <!-- Search Bar -->
        <div class="shop-search-container">
            
        </div>
        
        <!-- Minimal Category Tabs -->
        <div class="category-tabs-container">
           
            <div class="category-tabs">
                 <h1>Categories</h1>
                <button class="category-tab active" data-category="all">
                    <i class="fas fa-th-large"></i> All Items
                </button>
                <button class="category-tab" data-category="wellness">
                    <i class="fas fa-spa"></i> Wellness & Health
                </button>
                <button class="category-tab" data-category="digital">
                    <i class="fas fa-laptop"></i> Digital Products
                </button>
                <button class="category-tab" data-category="services">
                    <i class="fas fa-concierge-bell"></i> Services
                </button>
                <button class="category-tab" data-category="electronics">
                    <i class="fas fa-tablet-alt"></i> Electronics
                </button>
                <button class="category-tab" data-category="home">
                    <i class="fas fa-home"></i> Home & Living
                </button>
                <button class="category-tab" data-category="fashion">
                    <i class="fas fa-tshirt"></i> Fashion
                </button>
                <button class="category-tab" data-category="art">
                    <i class="fas fa-paint-brush"></i> Art & Decor
                </button>
            </div>
        </div>
    </div>
</section>


<!-- Shop Container -->
<div class="container shop-container">
    <!-- Mobile Filter Button -->
    <!-- <button class="mobile-filter-btn">
        <i class="fas fa-filter"></i> Filter Products
    </button> -->

    <!-- Shop Main Content -->
    <main class="shop-main">
        <!-- Shop Header -->
        <div class="shop-header">
            <div class="results-count">Showing 1-12 of 156 results</div>
            <div class="shop-sort">
                <label for="sort">Sort by:</label>
                <select id="sort" class="sort-select">
                    <option value="featured">Featured</option>
                    <option value="newest">Newest</option>
                    <option value="price-low">Price: Low to High</option>
                    <option value="price-high">Price: High to Low</option>
                    <option value="rating">Customer Rating</option>
                    <option value="popular">Most Popular</option>
                </select>
                <div class="view-toggle">
                    <button class="view-btn active" data-view="grid">
                        <i class="fas fa-th-large"></i>
                    </button>
                    <button class="view-btn" data-view="list">
                        <i class="fas fa-list"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Products Grid View -->
<div class="products-grid active">
    <!-- Product 1 -->
   
    <!-- Product 2 -->
</div>
<div class="products-list">
            <!-- List view products will be loaded here -->
        </div>


        <!-- Pagination -->
<!-- Pagination -->
<div class="pagination">
    <button class="page-btn disabled">
        <i class="fas fa-chevron-left"></i>
    </button>
    <button class="page-btn active">1</button>
    <button class="page-btn">2</button>
    <button class="page-btn">3</button>
    <span class="page-dots">...</span>
    <button class="page-btn">8</button>
    <button class="page-btn">
        <i class="fas fa-chevron-right"></i>
    </button>
</div>
    </main>
</div>
 
           

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-container">
                <div class="footer-column">
                    <h3>Toppel Quantum</h3>
                    <p>Your premier destination for quality products and services</p>
                    <div class="social-icons">
            <a href="https://www.instagram.com/toppel_quantum_wellness/#" class="social-link"><i class="fab fa-facebook-f"></i></a>
            <a href="https://www.instagram.com/toppel_quantum_wellness/#" class="social-link"><i class="fab fa-instagram"></i></a>
            <a href="https://www.tiktok.com/@toppel_quantum_wellness" class="social-link"><i class="fab fa-tiktok"></i></a>
            <a href="mailto:tesogeyi@gmail.com" class="social-link"><i class="fas fa-envelope"></i></a>
                </div>
                
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="shop.html">Shop</a></li>
                        <li><a href="services.html">Services</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Customer Support</h3>
                    <ul>
                        <li><a href="about.html#faq">FAQ</a></li>
                        <li><a href="affiliates.html">Affiliates</a></li>
                        <li><a href="terms.html">Terms of Service</a></li>
                    </ul>
                </div>
                
                <div class="footer-column newsletter">
                    <h3>Stay Updated</h3>
                    <p>Subscribe for new arrivals and exclusive offers</p>
                    <form>
                        <input type="email" placeholder="Your email address" required>
                        <button type="submit">Subscribe</button>
                    </form>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 Toppel Quantum. All rights reserved. <br> powered by <a href="https://ebassgroup.web.app" target="_blank" rel="noopener noreferrer" class="ebassgroup">Ebass Group</a></p>
            </div>
        </div>
    </footer>























<!-- Firebase scripts -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
 
<script>
  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyB2ABwMkTv2KohBBWt8NtwPCoQY_zk83nQ",
    authDomain: "toppelquantumwellness.firebaseapp.com",
    projectId: "toppelquantumwellness",
    storageBucket: "toppelquantumwellness.firebasestorage.app",
    messagingSenderId: "898646087004",
    appId: "1:898646087004:web:532986f721e3df589d9d99",
    measurementId: "G-J1VHVGWJHR"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  
  // Get Firestore database
  const db = firebase.firestore();
  
  console.log("Firebase initialized!");
</script>

<script>
// ========== GLOBAL VARIABLES ==========
let allProducts = []; // For pagination
const productsPerPage = 8;
let currentPage = 1;

// Add this to your global variables
let filteredProducts = [];
let isFiltering = false;

// Cart Data Structure
let cart = JSON.parse(localStorage.getItem('toppelQuantumCart')) || [];
let cartItems = cart.reduce((total, item) => total + item.quantity, 0);

// Product Modal Elements
let productModal, closeProductModalBtn, modalMainImage, modalCategory, modalTitle;
let modalDescription, modalPrice, modalFeatures, modalSpecs, modalImageThumbnails;
let addToCartModalBtn, buyNowModalBtn, wishlistModalBtn, qtyMinusBtn, qtyPlusBtn, quantityInput;

// UI Elements
let cartOverlay, searchOverlay;

// ========== DOM INITIALIZATION ==========
function initializeDOM() {
  console.log("Initializing DOM elements...");
  
  // Initialize modal elements
  productModal = document.querySelector('.product-detail-modal');
  closeProductModalBtn = document.querySelector('.close-product-modal');
  modalMainImage = document.getElementById('modal-main-image');
  modalCategory = document.getElementById('modal-category');
  modalTitle = document.getElementById('modal-title');
  modalDescription = document.getElementById('modal-description');
  modalPrice = document.getElementById('modal-price');
  modalFeatures = document.getElementById('modal-features');
  modalSpecs = document.getElementById('modal-specs');
  modalImageThumbnails = document.querySelector('.image-thumbnails');
  addToCartModalBtn = document.querySelector('.add-to-cart-modal');
  buyNowModalBtn = document.querySelector('.buy-now-modal');
  wishlistModalBtn = document.querySelector('.wishlist-modal');
  qtyMinusBtn = document.querySelector('.qty-minus');
  qtyPlusBtn = document.querySelector('.qty-plus');
  quantityInput = document.getElementById('quantity');
  
  // Initialize overlays
  cartOverlay = document.querySelector('.cart-overlay');
  searchOverlay = document.querySelector('.search-overlay');
  
  console.log("DOM elements initialized!");
}

// ========== FIREBASE PRODUCT LOADING ==========
async function loadProductsFromFirebase() {
  try {
    console.log("Loading products from Firebase...");
    
    const productsGrid = document.querySelector('.products-grid');
    if (!productsGrid) {
      console.error("Products grid not found!");
      return;
    }

    
    
    // Show loading message
    productsGrid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 40px; color: var(--navy);">Loading products...</div>';
    
    if (!db) {
      console.error("Firebase not initialized!");
      productsGrid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 40px; color: red;">Firebase error.</div>';
      return;
    }
    
    const snapshot = await db.collection('products').get();
    
    if (snapshot.empty) {
      productsGrid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 40px; color: var(--gray);">No products found in database.</div>';
      return;
    }
    
    // Clear and prepare
    allProducts = [];
    productsGrid.innerHTML = '';
    
    snapshot.forEach((doc) => {
      const product = doc.data();
      product.id = doc.id;
      
      // Create and add product card
      const productCardHTML = createProductCard(product);
      productsGrid.insertAdjacentHTML('beforeend', productCardHTML);
      
      // Store reference
      const cardElement = productsGrid.lastElementChild;
      allProducts.push(cardElement);
    });
    
    console.log(`Loaded ${snapshot.size} products`);
    
    // Initialize pagination
    updatePagination();
    showPage(1);
    setupPaginationHandlers();
    updateResultsCount();
    
    // Reattach event listeners
    setTimeout(() => {
      attachProductEventListeners();
    }, 100);
    
  } catch (error) {
    console.error("Error loading products:", error);
    const productsGrid = document.querySelector('.products-grid');
    if (productsGrid) {
      productsGrid.innerHTML = `
        <div style="grid-column: 1/-1; text-align: center; padding: 40px;">
          <i class="fas fa-exclamation-triangle" style="font-size: 48px; color: #ff6b6b; margin-bottom: 20px;"></i>
          <h3 style="color: var(--navy); margin-bottom: 10px;">Error Loading Products</h3>
          <p style="color: var(--gray); margin-bottom: 20px;">${error.message}</p>
          <button onclick="loadProductsFromFirebase()" class="btn btn-purple">
            <i class="fas fa-redo"></i> Try Again
          </button>
        </div>
      `;
    }
  }
  // At the end of your loadProductsFromFirebase function, add:
// Initialize filtered products array
filteredProducts = [...allProducts];
  
  // Debug: Log product categories
  console.log(`Product: ${product.title || 'No title'}, Category: ${product.category || 'No category'}`);
}

// Helper function to create product card HTML
function createProductCard(product) {
  // Use safe defaults
  const title = product.title || product.name || "Untitled Product";
  const price = product.price || 0;
  const category = product.category || "Uncategorized";
  const image = product.image || product.imageUrl || "https://via.placeholder.com/400x300";
  const description = product.description || "No description available";
  
  // Create badges
  let badgesHTML = '';
  if (product.badge) {
    const badgeClass = product.badge === 'new' ? 'badge-new' : 
                      product.badge === 'sale' ? 'badge-sale' : 
                      product.badge === 'bestseller' ? 'badge-bestseller' : '';
    if (badgeClass) {
      badgesHTML = `<span class="product-badge ${badgeClass}">${product.badge}</span>`;
    }
  }
  
  // Create price HTML
  let priceHTML = `<span class="current-price">â‚¦${parseFloat(price).toFixed(2)}</span>`;
  if (product.originalPrice) {
    priceHTML += `<span class="original-price">â‚¦${parseFloat(product.originalPrice).toFixed(2)}</span>`;
  }
  if (product.discount) {
    priceHTML += `<span class="discount">${product.discount}%</span>`;
  }
  
  return `
    <div class="product-card" data-firebase-id="${product.id}">
      <div class="product-image">
        <img src="${image}" alt="${title}" loading="lazy">
        <div class="product-badges">
          ${badgesHTML}
        </div>
        <div class="quick-actions">
          <button class="quick-action-btn" title="Quick View">
            <i class="fas fa-eye"></i>
          </button>
        </div>
      </div>
      <div class="product-info">
        <span class="product-category">${category}</span>
        <h3 class="product-title">${title}</h3>
        <p class="product-description">${description.substring(0, 100)}${description.length > 100 ? '...' : ''}</p>
        <div class="product-price">
          ${priceHTML}
        </div>
        <div class="product-actions">
          <button class="add-to-cart-btn">
            <i class="fas fa-cart-plus"></i> Add to Cart
          </button>
          <button class="view-details-btn">
            <i class="fas fa-info-circle"></i> Details
          </button>
        </div>
      </div>
    </div>
  `;
}

// ========== EVENT LISTENERS MANAGEMENT ==========
function attachProductEventListeners() {
    console.log("Attaching product event listeners...");
    
    // Use event delegation for better performance
    document.addEventListener('click', handleGlobalClick);
    
    // Also attach directly to existing elements
    document.querySelectorAll('.add-to-cart-btn').forEach(button => {
        button.addEventListener('click', handleAddToCart);
    });
    
    document.querySelectorAll('.view-details-btn').forEach(button => {
        button.addEventListener('click', handleViewDetails);
    });
    
    document.querySelectorAll('.quick-action-btn[title="Quick View"]').forEach(button => {
        button.addEventListener('click', handleQuickView);
    });
}

// Global click handler for event delegation
function handleGlobalClick(e) {
    // Add to cart button - grid view
    if (e.target.closest('.add-to-cart-btn')) {
        e.preventDefault();
        e.stopPropagation();
        const btn = e.target.closest('.add-to-cart-btn');
        handleAddToCart.call(btn, e);
        return;
    }
    
    // View details button - grid view
    if (e.target.closest('.view-details-btn')) {
        e.preventDefault();
        e.stopPropagation();
        const btn = e.target.closest('.view-details-btn');
        handleViewDetails.call(btn, e);
        return;
    }
    
    // Quick view button
    if (e.target.closest('.quick-action-btn[title="Quick View"]')) {
        e.preventDefault();
        e.stopPropagation();
        const btn = e.target.closest('.quick-action-btn[title="Quick View"]');
        handleQuickView.call(btn, e);
        return;
    }
}

function handleAddToCart(e) {
    if (e) {
        e.preventDefault();
        e.stopPropagation();
    }
    
    const productData = getProductDataFromElement(this);
    if (!productData) return;
    
    const product = {
        ...productData,
        type: "product",
        quantity: 1
    };
    
    addToCart(product);
    
    // Visual feedback
    const originalText = this.innerHTML;
    this.innerHTML = '<i class="fas fa-check"></i> Added';
    this.style.backgroundColor = '#4CAF50';
    this.style.color = 'white';
    
    setTimeout(() => {
        this.innerHTML = originalText;
        this.style.backgroundColor = '';
        this.style.color = '';
    }, 2000);
}

function handleViewDetails(e) {
    if (e) {
        e.preventDefault();
        e.stopPropagation();
    }
    
    let productCard;
    
    // Check if we're in grid view or list view
    if (this.closest('.product-card')) {
        // Grid view
        productCard = this.closest('.product-card');
    } else if (this.closest('.product-list-item')) {
        // List view
        productCard = this.closest('.product-list-item');
    } else {
        console.error("Could not find product container");
        return;
    }
    
    const productId = productCard.getAttribute('data-firebase-id');
    
    // Open modal with Firebase data
    openProductModalFromCard(productId, productCard);
}

function handleQuickView(e) {
  e.stopPropagation();
  
  const productCard = this.closest('.product-card');
  const productId = productCard.getAttribute('data-firebase-id');
  
  // Open modal with Firebase data
  openProductModalFromCard(productId, productCard);
}

// ========== PRODUCT MODAL FUNCTIONS ==========
async function openProductModalFromCard(productId, productCard) {
  try {
    // Try to get product details from Firestore
    const doc = await db.collection('products').doc(productId).get();
    
    if (doc.exists) {
      const product = doc.data();
      product.id = productId;
      
      // Open modal with Firebase data
      openProductModalWithFirebaseData(product);
    } else {
      // Fallback to card data
      openProductModalWithCardData(productCard);
    }
  } catch (error) {
    console.error("Error loading product details:", error);
    // Fallback to card data
    openProductModalWithCardData(productCard);
  }
}

function openProductModalWithFirebaseData(product) {
  // Set modal content from Firebase data
  modalCategory.textContent = product.category || "Uncategorized";
  modalTitle.textContent = product.title || product.name || "Untitled Product";
  modalDescription.textContent = product.description || '';
  
  // Set price
  let priceHTML = `<span class="current-price">â‚¦${parseFloat(product.price || 0).toFixed(2)}</span>`;
  if (product.originalPrice) {
    priceHTML += `<span class="original-price">â‚¦${parseFloat(product.originalPrice).toFixed(2)}</span>`;
  }
  if (product.discount) {
    priceHTML += `<span class="discount">${product.discount}</span>`;
  }
  modalPrice.innerHTML = priceHTML;
  
  // Set images
  const mainImage = product.image || product.imageUrl || "https://via.placeholder.com/400x300";
  modalMainImage.src = mainImage;
  modalImageThumbnails.innerHTML = '';
  
  // If product has multiple images
  const images = product.images || [mainImage];
  images.forEach((image, index) => {
    const thumbnail = document.createElement('div');
    thumbnail.className = 'thumbnail' + (index === 0 ? ' active' : '');
    thumbnail.innerHTML = `<img src="${image}" alt="Thumbnail ${index + 1}">`;
    thumbnail.addEventListener('click', () => {
      modalMainImage.src = image;
      document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
      thumbnail.classList.add('active');
    });
    modalImageThumbnails.appendChild(thumbnail);
  });
  
  // Set features (if available)
  modalFeatures.innerHTML = '';
  if (product.features && Array.isArray(product.features)) {
    product.features.forEach(feature => {
      const li = document.createElement('li');
      li.textContent = feature;
      modalFeatures.appendChild(li);
    });
  } else {
    modalFeatures.innerHTML = '<li>No features listed</li>';
  }
  
  // Set specifications (if available)
  modalSpecs.innerHTML = '';
  if (product.specs && Array.isArray(product.specs)) {
    product.specs.forEach(spec => {
      const div = document.createElement('div');
      div.className = 'spec-item';
      div.innerHTML = `
        <span class="spec-label">${spec.label}</span>
        <span class="spec-value">${spec.value}</span>
      `;
      modalSpecs.appendChild(div);
    });
  } else {
    modalSpecs.innerHTML = '<div class="spec-item"><span>No specifications available</span></div>';
  }
  
  // Store current product ID for cart
  productModal.setAttribute('data-current-product-id', product.id);
  
  // Show modal
  productModal.classList.add('active');
  document.body.style.overflow = 'hidden';
}

function openProductModalWithCardData(productCard) {
  // Fallback function using card data
  const productTitle = productCard.querySelector('.product-title').textContent;
  const productPriceText = productCard.querySelector('.current-price').textContent;
  const productImage = productCard.querySelector('img').src;
  const productCategory = productCard.querySelector('.product-category').textContent;
  
  modalCategory.textContent = productCategory;
  modalTitle.textContent = productTitle;
  modalDescription.textContent = "Product details loading...";
  modalPrice.innerHTML = `<span class="current-price">${productPriceText}</span>`;
  modalMainImage.src = productImage;
  
  // Show modal
  productModal.classList.add('active');
  document.body.style.overflow = 'hidden';
}

function closeProductModal() {
  productModal.classList.remove('active');
  document.body.style.overflow = 'auto';
}

// ========== CART FUNCTIONS ==========
function addToCart(product) {
  const existingItem = cart.find(item => item.id === product.id);
  
  if (existingItem) {
    existingItem.quantity += product.quantity || 1;
  } else {
    cart.push({
      ...product,
      quantity: product.quantity || 1
    });
  }
  
  cartItems = cart.reduce((total, item) => total + item.quantity, 0);
  updateCartCount();
  saveCartToLocalStorage();
  
  // Show cart notification
  showCartNotification(`${product.name} added to cart!`);
}

function removeFromCart(productId) {
  const itemIndex = cart.findIndex(item => item.id === productId);
  
  if (itemIndex > -1) {
    const item = cart[itemIndex];
    cartItems -= item.quantity;
    cart.splice(itemIndex, 1);
    updateCartCount();
    saveCartToLocalStorage();
    renderCart();
    
    // Show removal notification
    showCartNotification('Item removed from cart');
  }
}

function updateQuantity(productId, newQuantity) {
  if (newQuantity < 1) {
    removeFromCart(productId);
    return;
  }
  
  const item = cart.find(item => item.id === productId);
  
  if (item) {
    const quantityDifference = newQuantity - item.quantity;
    item.quantity = newQuantity;
    cartItems += quantityDifference;
    
    updateCartCount();
    saveCartToLocalStorage();
    renderCart();
  }
}

function updateCartCount() {
  const cartCountElement = document.querySelector('.cart-count');
  if (cartCountElement) {
    cartCountElement.textContent = cartItems;
    
    // Hide cart count if empty
    if (cartItems === 0) {
      cartCountElement.style.display = 'none';
    } else {
      cartCountElement.style.display = 'flex';
    }
  }
}

function saveCartToLocalStorage() {
  localStorage.setItem('toppelQuantumCart', JSON.stringify(cart));
}

function renderCart() {
  const cartItemsContainer = document.querySelector('.cart-items');
  const cartSubtotalElement = document.querySelector('.cart-subtotal');
  const cartTotalElement = document.querySelector('.cart-total');
  
  if (!cartItemsContainer) return;
  
  if (cart.length === 0) {
    cartItemsContainer.innerHTML = `
      <div class="empty-cart-message">
        <i class="fas fa-shopping-basket"></i>
        <p>Your cart is empty</p>
        <a href="shop.html" class="btn btn-purple">Start Shopping</a>
      </div>
    `;
    if (cartSubtotalElement) cartSubtotalElement.textContent = 'â‚¦0.00';
    if (cartTotalElement) cartTotalElement.textContent = 'â‚¦0.00';
    return;
  }
  
  let subtotal = 0;
  let cartHTML = '';
  
  cart.forEach(item => {
    const itemTotal = item.price * item.quantity;
    subtotal += itemTotal;
    
    cartHTML += `
      <div class="cart-item" data-id="${item.id}">
        <div class="cart-item-image">
          <img src="${item.image}" alt="${item.name}">
        </div>
        <div class="cart-item-details">
          <h4>${item.name}</h4>
          <span class="cart-item-category">${item.category}</span>
          <div class="cart-item-price">â‚¦${item.price.toFixed(2)}</div>
        </div>
        <div class="cart-item-actions">
          <div class="cart-item-quantity">
            <button class="quantity-btn minus" onclick="updateQuantity('${item.id}', ${item.quantity - 1})" ${item.quantity <= 1 ? 'disabled style="opacity:0.5"' : ''}>-</button>
            <span class="quantity-value">${item.quantity}</span>
            <button class="quantity-btn plus" onclick="updateQuantity('${item.id}', ${item.quantity + 1})">+</button>
          </div>
          <button class="remove-item" onclick="removeFromCart('${item.id}')">
            <i class="fas fa-trash"></i> Remove
          </button>
        </div>
      </div>
    `;
  });
  
  cartItemsContainer.innerHTML = cartHTML;
  if (cartSubtotalElement) cartSubtotalElement.textContent = `â‚¦${subtotal.toFixed(2)}`;
  if (cartTotalElement) cartTotalElement.textContent = `â‚¦${subtotal.toFixed(2)}`;
}



// ========== PAGINATION FUNCTIONS ==========
function updatePagination() {
  const totalPages = getTotalPages();
  const paginationContainer = document.querySelector('.pagination');
  
  if (!paginationContainer) return;
  
  // Clear existing pagination
  paginationContainer.innerHTML = '';
  
  // Create previous button
  const prevBtn = document.createElement('button');
  prevBtn.className = 'page-btn' + (currentPage === 1 ? ' disabled' : '');
  prevBtn.innerHTML = '<i class="fas fa-chevron-left"></i>';
  prevBtn.addEventListener('click', () => {
    if (currentPage > 1) {
      showPage(currentPage - 1);
    }
  });
  paginationContainer.appendChild(prevBtn);
  
  // Create page number buttons
  let startPage = Math.max(1, currentPage - 2);
  let endPage = Math.min(totalPages, startPage + 4);
  
  // Adjust if we're near the end
  if (endPage - startPage < 4) {
    startPage = Math.max(1, endPage - 4);
  }
  
  // Add dots before if needed
  if (startPage > 1) {
    const dotsBefore = document.createElement('span');
    dotsBefore.className = 'page-dots';
    dotsBefore.textContent = '...';
    paginationContainer.appendChild(dotsBefore);
  }
  
  // Create page number buttons
  for (let i = startPage; i <= endPage; i++) {
    const pageBtn = document.createElement('button');
    pageBtn.className = 'page-btn' + (i === currentPage ? ' active' : '');
    pageBtn.textContent = i;
    pageBtn.addEventListener('click', () => {
      if (i !== currentPage) {
        showPage(i);
      }
    });
    paginationContainer.appendChild(pageBtn);
  }
  
  // Add dots after if needed
  if (endPage < totalPages) {
    const dotsAfter = document.createElement('span');
    dotsAfter.className = 'page-dots';
    dotsAfter.textContent = '...';
    paginationContainer.appendChild(dotsAfter);
  }
  
  // Create next button
  const nextBtn = document.createElement('button');
  nextBtn.className = 'page-btn' + (currentPage === totalPages ? ' disabled' : '');
  nextBtn.innerHTML = '<i class="fas fa-chevron-right"></i>';
  nextBtn.addEventListener('click', () => {
    if (currentPage < totalPages) {
      showPage(currentPage + 1);
    }
  });
  paginationContainer.appendChild(nextBtn);
}

function showPage(pageNum, skipAnimation = false) {
    currentPage = pageNum;
    
    // Check which view is active
    const viewGridBtn = document.querySelector('.view-btn[data-view="grid"]');
    const viewListBtn = document.querySelector('.view-btn[data-view="list"]');
    const isGridView = viewGridBtn && viewGridBtn.classList.contains('active');
    const isListView = viewListBtn && viewListBtn.classList.contains('active');
    
    if (isGridView) {
        // Show grid view
        const productsGrid = document.querySelector('.products-grid');
        const productsList = document.querySelector('.products-list');
        
        if (productsGrid) productsGrid.classList.add('active');
        if (productsList) productsList.classList.remove('active');
        
        // Determine which products to show (filtered or all)
        const productsToPaginate = isFiltering && filteredProducts.length > 0 ? filteredProducts : allProducts;
        
        // Hide all products first
        allProducts.forEach(product => {
            product.style.display = 'none';
            if (!skipAnimation) {
                product.style.opacity = '0';
                product.style.transform = 'translateY(10px)';
            }
        });
        
        // Calculate which products to show for current page
        const startIndex = (pageNum - 1) * productsPerPage;
        const endIndex = startIndex + productsPerPage;
        const productsToShow = productsToPaginate.slice(startIndex, endIndex);
        
        // Show products for current page
        productsToShow.forEach((product, index) => {
            setTimeout(() => {
                product.style.display = 'block';
                if (!skipAnimation) {
                    setTimeout(() => {
                        product.style.opacity = '1';
                        product.style.transform = 'translateY(0)';
                        product.style.transition = 'all 0.4s ease';
                    }, 10);
                } else {
                    product.style.opacity = '1';
                    product.style.transform = 'none';
                }
            }, skipAnimation ? 0 : index * 50);
        });
        
    } else if (isListView) {
        // Show list view
        const productsGrid = document.querySelector('.products-grid');
        const productsList = document.querySelector('.products-list');
        
        if (productsGrid) productsGrid.classList.remove('active');
        if (productsList) productsList.classList.add('active');
        
        // Create list view
        createListView();
    }
    
    // Update pagination UI
    updatePagination();
    
    // Update results count
    updateResultsCount();
}

function setupPaginationHandlers() {
  // Handlers are now attached in updatePagination function
}

function updateResultsCount() {
  const resultsCount = document.querySelector('.results-count');
  if (!resultsCount) return;
  
  // Determine which products to count
  const productsToCount = isFiltering && filteredProducts.length > 0 ? filteredProducts : allProducts;
  const totalProducts = productsToCount.length;
  const startIndex = (currentPage - 1) * productsPerPage + 1;
  const endIndex = Math.min(currentPage * productsPerPage, totalProducts);
  
  resultsCount.textContent = `Showing ${startIndex}-${endIndex} of ${totalProducts} results`;
}

function getTotalPages() {
  // Use filtered products if filtering, otherwise all products
  const totalProducts = isFiltering && filteredProducts.length > 0 ? filteredProducts.length : allProducts.length;
  return Math.ceil(totalProducts / productsPerPage);
}

// ========== UI FUNCTIONS ==========
function showCartNotification(message) {
  // Remove existing notification if any
  const existingNotification = document.querySelector('.cart-notification');
  if (existingNotification) {
    existingNotification.remove();
  }
  
  // Create notification
  const notification = document.createElement('div');
  notification.className = 'cart-notification';
  notification.innerHTML = `
    <div class="cart-notification-content">
      <i class="fas fa-check-circle"></i>
      <span>${message}</span>
    </div>
  `;
  
  document.body.appendChild(notification);
  
  // Remove notification after 3 seconds
  setTimeout(() => {
    notification.style.animation = 'slideOut 0.3s ease-out forwards';
    setTimeout(() => {
      notification.remove();
    }, 300);
  }, 3000);
}

function openCartOverlay() {
  if (cartOverlay) {
    cartOverlay.classList.add('active');
    renderCart();
  }
}

function closeCartOverlay() {
  if (cartOverlay) {
    cartOverlay.classList.remove('active');
  }
}

// ========== INITIALIZATION ==========
document.addEventListener('DOMContentLoaded', function() {
  console.log("DOM fully loaded and parsed");
  
  // 1. Initialize DOM elements
  initializeDOM();
  
  // 2. Initialize cart
  updateCartCount();
  renderCart();

  setupCheckoutButton();
  
  // 3. Load products from Firebase
  setTimeout(() => {
    loadProductsFromFirebase();
  }, 500);
  
  // 4. Setup basic event listeners
  setupBasicEventListeners();
  
  // 5. Initialize other UI components
  initializeUIComponents();
});

function setupBasicEventListeners() {
  // Mobile menu toggle
  const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
  if (mobileMenuBtn) {
    mobileMenuBtn.addEventListener('click', function() {
      document.querySelector('nav').classList.toggle('active');
    });
  }
  
  // Cart icon click
  const cartIcon = document.querySelector('.cart-icon');
  if (cartIcon) {
    cartIcon.addEventListener('click', openCartOverlay);
  }
  
  // Close cart overlay
  const closeCartBtn = document.querySelector('.close-cart');
  if (closeCartBtn) {
    closeCartBtn.addEventListener('click', closeCartOverlay);
  }
  
  // Continue shopping button
  const continueShoppingBtn = document.querySelector('.continue-shopping');
  if (continueShoppingBtn) {
    continueShoppingBtn.addEventListener('click', closeCartOverlay);
  }
  
  // Close modal when clicking outside
  if (cartOverlay) {
    cartOverlay.addEventListener('click', function(e) {
      if (e.target === cartOverlay) {
        closeCartOverlay();
      }
    });
  }
  
  // Close product modal
  if (closeProductModalBtn) {
    closeProductModalBtn.addEventListener('click', closeProductModal);
  }
  
  // Close product modal when clicking outside
  if (productModal) {
    productModal.addEventListener('click', function(e) {
      if (e.target === productModal) {
        closeProductModal();
      }
    });
  }
  
  // Close modal with Escape key
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      if (productModal && productModal.classList.contains('active')) {
        closeProductModal();
      }
      if (cartOverlay && cartOverlay.classList.contains('active')) {
        closeCartOverlay();
      }
    }
  });
  
  // Quantity controls
  if (qtyMinusBtn && quantityInput) {
    qtyMinusBtn.addEventListener('click', function() {
      let value = parseInt(quantityInput.value);
      if (value > 1) {
        quantityInput.value = value - 1;
      }
    });
  }

  // Close modal with Escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            if (productModal && productModal.classList.contains('active')) {
                closeProductModal();
            }
            if (cartOverlay && cartOverlay.classList.contains('active')) {
                closeCartOverlay();
            }
            if (searchOverlay && searchOverlay.classList.contains('active')) {
                closeSearchOverlay();
            }
        }
    });
  
  if (qtyPlusBtn && quantityInput) {
    qtyPlusBtn.addEventListener('click', function() {
      let value = parseInt(quantityInput.value);
      if (value < 10) {
        quantityInput.value = value + 1;
      }
    });
  }
  
  // Add to cart from modal
  if (addToCartModalBtn) {
    addToCartModalBtn.addEventListener('click', function() {
      const productId = productModal.getAttribute('data-current-product-id');
      const quantity = parseInt(quantityInput.value);
      const productTitle = modalTitle.textContent;
      const productPriceText = modalPrice.querySelector('.current-price').textContent;
      const productPrice = parseFloat(productPriceText.replace('â‚¦', '').replace(',', ''));
      const productImage = modalMainImage.src;
      const productCategory = modalCategory.textContent;
      
      const product = {
        id: productId || Date.now().toString(),
        name: productTitle,
        price: productPrice,
        category: productCategory,
        type: "product",
        image: productImage,
        quantity: quantity
      };
      
      addToCart(product);
      showCartNotification(`${productTitle} (x${quantity}) added to cart!`);
      
      // Visual feedback
      const originalText = this.innerHTML;
      this.innerHTML = '<i class="fas fa-check"></i> Added!';
      this.style.backgroundColor = '#4CAF50';
      
      setTimeout(() => {
        this.innerHTML = originalText;
        this.style.backgroundColor = '';
      }, 2000);
    });
  }
}

function initializeUIComponents() {
  // View toggle
   // View toggle
  const viewBtns = document.querySelectorAll('.view-btn');
  if (viewBtns.length > 0) {
    viewBtns.forEach(btn => {
      btn.addEventListener('click', function() {
        // Remove active class from all buttons
        viewBtns.forEach(b => b.classList.remove('active'));
        // Add active class to clicked button
        this.classList.add('active');
        
        const view = this.getAttribute('data-view');
        showPage(currentPage, true); // This will handle switching between views
      });
    });
  }
  
  // Category tabs
  const categoryTabs = document.querySelectorAll('.category-tab');
  if (categoryTabs.length > 0) {
    categoryTabs.forEach(tab => {
      tab.addEventListener('click', function() {
        // Remove active class from all tabs
        categoryTabs.forEach(t => t.classList.remove('active'));
        // Add active class to clicked tab
        this.classList.add('active');
        
        const category = this.getAttribute('data-category');
        const categoryText = this.textContent.trim();
        
        // Show notification
        showCartNotification(`Showing: ${categoryText}`);
        
        // Filter products by category
        filterProductsByCategory(category);
      });
    });
  }
  
  // Sort functionality
  const sortSelect = document.querySelector('#sort');
  if (sortSelect) {
    sortSelect.addEventListener('change', function() {
      const sortValue = this.value;
      sortProducts(sortValue);
      showCartNotification(`Sorted by: ${this.options[this.selectedIndex].text}`);
    });
  }

  initializeSearch();
}

// ========== PRODUCT FILTERING AND SORTING ==========
  
function filterProductsByCategory(category) {
  console.log(`=== FILTERING CATEGORY ===`);
  console.log(`Selected category: ${category}`);
  console.log(`Total products: ${allProducts.length}`);
  
  // Set filtering flag
  isFiltering = (category !== 'all');
  
  if (category === 'all') {
    // Show all products
    allProducts.forEach(card => {
      card.style.display = 'block';
      card.style.opacity = '1';
      card.style.pointerEvents = 'all';
      card.style.transform = 'none';
    });
    
    // Reset filtered products array
    filteredProducts = [...allProducts];
    currentPage = 1;
    showPage(1, true);
    
  } else {
    // Filter products
    filteredProducts = [];
    allProducts.forEach(card => {
      const cardCategory = card.querySelector('.product-category').textContent.toLowerCase();
      const matches = checkCategoryMatch(cardCategory, category);
      
      if (matches) {
        card.style.display = 'block';
        card.style.opacity = '1';
        card.style.pointerEvents = 'all';
        card.style.transform = 'none';
        filteredProducts.push(card);
      } else {
        card.style.display = 'none';
        card.style.opacity = '0';
        card.style.pointerEvents = 'none';
      }
    });
    
    // If no products match, show a message
    if (filteredProducts.length === 0) {
      const productsGrid = document.querySelector('.products-grid');
      const productsList = document.querySelector('.products-list');
      
      if (productsGrid) {
        // Save original content
        const originalHTML = productsGrid.innerHTML;
        
        // Show message in grid view
        productsGrid.innerHTML = `
          <div style="grid-column: 1/-1; text-align: center; padding: 60px 20px;">
            <i class="fas fa-box-open" style="font-size: 60px; color: var(--beige); margin-bottom: 20px;"></i>
            <h3 style="color: var(--navy); margin-bottom: 10px;">No products found in this category</h3>
            <p style="color: var(--gray); margin-bottom: 20px;">Try selecting a different category</p>
            <button class="btn btn-purple show-all-btn">
              <i class="fas fa-th-large"></i> Show All Products
            </button>
          </div>
        `;
        
        // Also update list view
        if (productsList) {
          productsList.innerHTML = `
            <div style="text-align: center; padding: 60px 20px;">
              <i class="fas fa-box-open" style="font-size: 60px; color: var(--beige); margin-bottom: 20px;"></i>
              <h3 style="color: var(--navy); margin-bottom: 10px;">No products found in this category</h3>
              <p style="color: var(--gray); margin-bottom: 20px;">Try selecting a different category</p>
              <button class="btn btn-purple show-all-btn-list">
                <i class="fas fa-th-large"></i> Show All Products
              </button>
            </div>
          `;
        }
        
        // Add event listener to "Show All" button in grid
        const showAllBtn = document.querySelector('.show-all-btn');
        if (showAllBtn) {
          showAllBtn.addEventListener('click', function() {
            productsGrid.innerHTML = originalHTML;
            // Reset category tab to "All"
            document.querySelectorAll('.category-tab').forEach(tab => {
              tab.classList.remove('active');
              if (tab.getAttribute('data-category') === 'all') {
                tab.classList.add('active');
              }
            });
            filterProductsByCategory('all');
            attachProductEventListeners(); // Reattach event listeners
          });
        }
        
        // Add event listener to "Show All" button in list
        const showAllBtnList = document.querySelector('.show-all-btn-list');
        if (showAllBtnList) {
          showAllBtnList.addEventListener('click', function() {
            productsGrid.innerHTML = originalHTML;
            // Reset category tab to "All"
            document.querySelectorAll('.category-tab').forEach(tab => {
              tab.classList.remove('active');
              if (tab.getAttribute('data-category') === 'all') {
                tab.classList.add('active');
              }
            });
            filterProductsByCategory('all');
            attachProductEventListeners(); // Reattach event listeners
          });
        }
      }
      return;
    }
    
    // Show first page of filtered products
    currentPage = 1;
    showPage(1, true);
  }
  
  // Update results count
  updateResultsCount();
}

// Update the updateResultsCount function to count only visible products
function updateResultsCount() {
  const resultsCount = document.querySelector('.results-count');
  if (!resultsCount) return;
  
  // Count only visible products
  const visibleProducts = Array.from(allProducts).filter(card => 
    card.style.display !== 'none' && card.style.opacity !== '0'
  );
  
  const totalProducts = visibleProducts.length || allProducts.length;
  const startIndex = (currentPage - 1) * productsPerPage + 1;
  const endIndex = Math.min(currentPage * productsPerPage, totalProducts);
  
  resultsCount.textContent = `Showing ${startIndex}-${endIndex} of ${totalProducts} results`;
}

function checkCategoryMatch(cardCategory, selectedCategory) {
  console.log(`Checking match: ${cardCategory} vs ${selectedCategory}`);
  
  // Convert to lowercase for case-insensitive comparison
  cardCategory = cardCategory.toLowerCase();
  
  const categoryMap = {
    'wellness': ['wellness', 'health', 'spa', 'medical', 'therapy', 'care'],
    'digital': ['digital', 'ebook', 'course', 'software', 'app', 'download', 'online'],
    'services': ['services', 'consultation', 'healing', 'session', 'therapy', 'treatment'],
    'electronics': ['electronics', 'tech', 'watch', 'phone', 'device', 'gadget', 'computer'],
    'home': ['home', 'living', 'decor', 'furniture', 'kitchen', 'garden'],
    'fashion': ['fashion', 'clothing', 'jewelry', 'wear', 'accessory', 'apparel'],
    'art': ['art', 'decor', 'painting', 'sculpture', 'craft', 'design', 'print']
  };
  
  if (categoryMap[selectedCategory]) {
    return categoryMap[selectedCategory].some(keyword => 
      cardCategory.includes(keyword)
    );
  }
  return cardCategory.includes(selectedCategory);
}

function sortProducts(sortBy) {
  // Reset filtering when sorting
  isFiltering = false;
  filteredProducts = [];
  
  // Convert NodeList to array for sorting
  const productsArray = Array.from(allProducts);
  
  switch(sortBy) {
    case 'price-low':
      // Sort the DOM elements directly
      allProducts.sort((a, b) => {
        const priceA = parseFloat(a.querySelector('.current-price').textContent.replace('â‚¦', '').replace(',', ''));
        const priceB = parseFloat(b.querySelector('.current-price').textContent.replace('â‚¦', '').replace(',', ''));
        return priceA - priceB;
      });
      break;
      
    case 'price-high':
      allProducts.sort((a, b) => {
        const priceA = parseFloat(a.querySelector('.current-price').textContent.replace('â‚¦', '').replace(',', ''));
        const priceB = parseFloat(b.querySelector('.current-price').textContent.replace('â‚¦', '').replace(',', ''));
        return priceB - priceA;
      });
      break;
      
    case 'rating':
      // For demo, sort by product name
      allProducts.sort((a, b) => {
        const nameA = a.querySelector('.product-title').textContent;
        const nameB = b.querySelector('.product-title').textContent;
        return nameA.localeCompare(nameB);
      });
      break;
      
    case 'popular':
      // For demo, randomize order
      allProducts.sort(() => Math.random() - 0.5);
      break;
      
    default: // 'featured' or 'newest'
      // Original order (as loaded from Firebase)
      break;
  }
  
  // Reorder products in the DOM
  const productsGrid = document.querySelector('.products-grid');
  if (productsGrid) {
    // Clear the grid
    productsGrid.innerHTML = '';
    
    // Append sorted products
    allProducts.forEach(product => {
      productsGrid.appendChild(product);
    });
  }
  
  // Re-render current page with sorted products
  showPage(currentPage, true);
}



// ========== LIST VIEW FUNCTIONS ==========
function createListView() {
    console.log("Creating list view...");
    
    const productsList = document.querySelector('.products-list');
    if (!productsList) {
        console.error("Products list container not found!");
        return;
    }
    
    // Clear existing list view
    productsList.innerHTML = '';
    
    // Determine which products to show (filtered or all)
    const productsToShow = isFiltering && filteredProducts.length > 0 ? filteredProducts : allProducts;
    
    // Get products for current page
    const startIndex = (currentPage - 1) * productsPerPage;
    const endIndex = startIndex + productsPerPage;
    const currentProducts = productsToShow.slice(startIndex, endIndex);
    
    if (currentProducts.length === 0) {
        productsList.innerHTML = `
            <div style="text-align: center; padding: 60px 20px; color: var(--gray);">
                <i class="fas fa-box-open" style="font-size: 60px; margin-bottom: 20px;"></i>
                <h3 style="color: var(--navy); margin-bottom: 10px;">No products to display</h3>
                <p>Try changing your filters or search terms</p>
            </div>
        `;
        return;
    }
    
    // Create list items for each product
    currentProducts.forEach(productCard => {
        // Get product data from the card
        const productId = productCard.getAttribute('data-firebase-id');
        const productImage = productCard.querySelector('img').src;
        const productCategory = productCard.querySelector('.product-category').textContent;
        const productTitle = productCard.querySelector('.product-title').textContent;
        const productDescription = productCard.querySelector('.product-description').textContent;
        const productPriceHTML = productCard.querySelector('.product-price').innerHTML;
        
        // Extract just the current price for the cart
        const priceMatch = productPriceHTML.match(/<span class="current-price">(.*?)<\/span>/);
        const currentPrice = priceMatch ? priceMatch[1] : 'â‚¦0.00';
        
        // Create list item HTML
        const listItemHTML = `
            <div class="product-list-item" data-firebase-id="${productId}">
                <div class="list-image">
                    <img src="${productImage}" alt="${productTitle}" loading="lazy" 
                         onerror="this.src='https://via.placeholder.com/400x300?text=Image+Not+Found'">
                </div>
                <div class="list-info">
                    <span class="product-category">${productCategory}</span>
                    <h3 class="product-title">${productTitle}</h3>
                    <p class="product-description">${productDescription}</p>
                    
                    <div class="product-rating">
                        <div class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                        </div>
                        <span class="rating-count">(4.5)</span>
                    </div>
                    
                    <div class="list-meta">
                        <div class="product-price">
                            ${productPriceHTML}
                        </div>
                        <div class="product-actions">
                            <button class="add-to-cart-btn" 
                                    data-product-id="${productId}"
                                    data-product-name="${productTitle}"
                                    data-product-price="${currentPrice}"
                                    data-product-image="${productImage}"
                                    data-product-category="${productCategory}">
                                <i class="fas fa-cart-plus"></i> Add to Cart
                            </button>
                            <button class="view-details-btn" 
                                    data-product-id="${productId}">
                                <i class="fas fa-info-circle"></i> Details
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        // Add to list view
        productsList.insertAdjacentHTML('beforeend', listItemHTML);
    });
}

function attachListEventListeners() {
    console.log("Attaching list view event listeners...");
    
    // Add to cart buttons in list view
    document.querySelectorAll('.product-list-item .add-to-cart-btn').forEach(button => {
        button.addEventListener('click', handleAddToCart);
    });
    
    // View details buttons in list view
    document.querySelectorAll('.product-list-item .view-details-btn').forEach(button => {
        button.addEventListener('click', handleViewDetails);
    });
}

function getProductDataFromElement(element) {
    let productCard;
    
    if (element.closest('.product-card')) {
        productCard = element.closest('.product-card');
    } else if (element.closest('.product-list-item')) {
        productCard = element.closest('.product-list-item');
    } else {
        console.error("Could not find product container");
        return null;
    }
    
    // Try to get data from data attributes first
    const productId = productCard.getAttribute('data-firebase-id');
    const productTitle = productCard.querySelector('.product-title')?.textContent || '';
    
    // Get price from data attribute or element
    const priceElement = productCard.querySelector('.current-price');
    let productPriceText = '';
    
    if (priceElement) {
        productPriceText = priceElement.textContent;
    } else {
        // Try data attribute on button
        const addToCartBtn = productCard.querySelector('.add-to-cart-btn');
        if (addToCartBtn && addToCartBtn.getAttribute('data-product-price')) {
            productPriceText = addToCartBtn.getAttribute('data-product-price');
        }
    }
    
    const productPrice = parseFloat(productPriceText.replace('â‚¦', '').replace(',', '')) || 0;
    const productImage = productCard.querySelector('img')?.src || '';
    const productCategory = productCard.querySelector('.product-category')?.textContent || '';
    
    return {
        id: productId,
        name: productTitle,
        price: productPrice,
        category: productCategory,
        image: productImage
    };
}





// ========== SEARCH FUNCTIONALITY ==========
function initializeSearch() {
    console.log("Initializing search functionality...");
    
    // Get search elements
    const searchIconMobile = document.querySelector('.search-icon-mobile');
    const searchBarIcon = document.querySelector('.search-bar i.fa-search');
    const closeSearchBtn = document.querySelector('.close-search');
    
    if (!searchOverlay) {
        console.error("Search overlay not found!");
        return;
    }
    
    // Open search overlay when clicking search icons
    if (searchIconMobile) {
        searchIconMobile.addEventListener('click', openSearchOverlay);
    }
    
    if (searchBarIcon) {
        searchBarIcon.addEventListener('click', openSearchOverlay);
    }
    
    // Close search overlay
    if (closeSearchBtn) {
        closeSearchBtn.addEventListener('click', closeSearchOverlay);
    }
    
    // Close when clicking outside the content
    searchOverlay.addEventListener('click', function(e) {
        if (e.target === searchOverlay) {
            closeSearchOverlay();
        }
    });
    
    // Close with Escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && searchOverlay.classList.contains('active')) {
            closeSearchOverlay();
        }
    });
    
    // Setup search input functionality
    const overlaySearchInput = document.getElementById('overlay-search');
    const searchResultsList = document.querySelector('.search-results-list');
    const searchResultsPlaceholder = document.querySelector('.search-results-placeholder');
    
    if (overlaySearchInput) {
        overlaySearchInput.addEventListener('input', function(e) {
            const searchTerm = e.target.value.trim();
            
            if (searchTerm.length === 0) {
                searchResultsList.style.display = 'none';
                searchResultsPlaceholder.style.display = 'block';
                return;
            }
            
            // Show loading state
            searchResultsList.innerHTML = '<div style="padding: 20px; text-align: center; color: var(--gray);">Searching...</div>';
            searchResultsList.style.display = 'block';
            searchResultsPlaceholder.style.display = 'none';
            
            // Simulate search delay
            setTimeout(() => {
                performSearch(searchTerm);
            }, 300);
        });
        
        // Focus input when overlay opens
        overlaySearchInput.addEventListener('focus', function() {
            this.parentElement.classList.add('focused');
        });
        
        overlaySearchInput.addEventListener('blur', function() {
            this.parentElement.classList.remove('focused');
        });
    }
}

function openSearchOverlay() {
    console.log("Opening search overlay...");
    
    if (searchOverlay) {
        searchOverlay.classList.add('active');
        document.body.style.overflow = 'hidden';
        
        // Focus the search input
        const searchInput = document.getElementById('overlay-search');
        if (searchInput) {
            setTimeout(() => {
                searchInput.focus();
            }, 100);
        }
    }
}

function closeSearchOverlay() {
    if (searchOverlay) {
        searchOverlay.classList.remove('active');
        document.body.style.overflow = 'auto';
        
        // Clear search input
        const searchInput = document.getElementById('overlay-search');
        if (searchInput) {
            searchInput.value = '';
        }
        
        // Reset results
        const searchResultsList = document.querySelector('.search-results-list');
        const searchResultsPlaceholder = document.querySelector('.search-results-placeholder');
        
        if (searchResultsList) {
            searchResultsList.style.display = 'none';
        }
        if (searchResultsPlaceholder) {
            searchResultsPlaceholder.style.display = 'block';
        }
    }
}

function performSearch(searchTerm) {
    const searchResultsList = document.querySelector('.search-results-list');
    
    if (!searchResultsList) return;
    
    if (!db) {
        searchResultsList.innerHTML = '<div style="padding: 20px; text-align: center; color: red;">Database not available</div>';
        return;
    }
    
    // Search in Firestore (case-insensitive)
    db.collection('products')
        .get()
        .then((querySnapshot) => {
            let resultsHTML = '';
            let foundCount = 0;
            
            querySnapshot.forEach((doc) => {
                const product = doc.data();
                product.id = doc.id;
                
                // Simple text search in title, description, and category
                const searchableText = `${product.title || ''} ${product.description || ''} ${product.category || ''}`.toLowerCase();
                
                if (searchableText.includes(searchTerm.toLowerCase())) {
                    foundCount++;
                    
                    resultsHTML += `
                        <div class="search-result-item" data-product-id="${product.id}">
                            <div class="search-result-icon">
                                <i class="fas fa-box"></i>
                            </div>
                            <div class="search-result-info">
                                <h4>${product.title || 'Untitled Product'}</h4>
                                <p>${(product.description || '').substring(0, 80)}...</p>
                                <span class="search-result-category">${product.category || 'Uncategorized'}</span>
                            </div>
                            <div class="search-result-price">â‚¦${parseFloat(product.price || 0).toFixed(2)}</div>
                        </div>
                    `;
                }
            });
            
            if (foundCount === 0) {
                resultsHTML = `
                    <div style="text-align: center; padding: 40px;">
                        <i class="fas fa-search" style="font-size: 48px; color: var(--beige); margin-bottom: 20px;"></i>
                        <h4 style="color: var(--navy); margin-bottom: 10px;">No results found</h4>
                        <p style="color: var(--gray);">Try different keywords or browse categories</p>
                    </div>
                `;
            } else {
                resultsHTML = `
                    <div style="margin-bottom: 20px; color: var(--navy); font-weight: 500;">
                        Found ${foundCount} result${foundCount !== 1 ? 's' : ''}
                    </div>
                    ${resultsHTML}
                `;
            }
            
            searchResultsList.innerHTML = resultsHTML;
            
            // Add click handlers to search result items
            document.querySelectorAll('.search-result-item').forEach(item => {
                item.addEventListener('click', function() {
                    const productId = this.getAttribute('data-product-id');
                    openProductFromSearch(productId);
                });
            });
        })
        .catch((error) => {
            console.error("Search error:", error);
            searchResultsList.innerHTML = `
                <div style="padding: 20px; text-align: center; color: red;">
                    <i class="fas fa-exclamation-triangle"></i>
                    <p>Error performing search. Please try again.</p>
                </div>
            `;
        });
}

function openProductFromSearch(productId) {
    closeSearchOverlay();
    
    // Try to find the product in the displayed products
    const productCard = document.querySelector(`.product-card[data-firebase-id="${productId}"]`);
    
    if (productCard) {
        // Open the product modal
        const viewDetailsBtn = productCard.querySelector('.view-details-btn');
        if (viewDetailsBtn) {
            viewDetailsBtn.click();
        } else {
            // Fallback: scroll to product
            productCard.scrollIntoView({ behavior: 'smooth' });
            
            // Highlight the product
            productCard.style.boxShadow = '0 0 0 3px var(--gold)';
            setTimeout(() => {
                productCard.style.boxShadow = '';
            }, 2000);
        }
    } else {
        // If product not in current view, show a message
        showCartNotification("Product found! Loading details...");
        
        // Load product directly from Firestore
        db.collection('products').doc(productId).get()
            .then((doc) => {
                if (doc.exists) {
                    const product = doc.data();
                    product.id = productId;
                    openProductModalWithFirebaseData(product);
                } else {
                    showCartNotification("Product not available.");
                }
            })
            .catch((error) => {
                console.error("Error loading product:", error);
                showCartNotification("Could not load product details.");
            });
    }
}




// ========== CART CHECKOUT FUNCTIONS ==========
function setupCheckoutButton() {
    console.log("Setting up checkout button...");
    
    const checkoutBtn = document.getElementById('proceed-to-checkout');
    if (checkoutBtn) {
        checkoutBtn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            console.log("Checkout button clicked!");
            proceedToCheckout();
        });
    } else {
        console.error("Checkout button not found!");
    }
}

function proceedToCheckout() {
    console.log("Proceeding to checkout...");
    
    // Get cart data
    const cart = JSON.parse(localStorage.getItem('toppelQuantumCart')) || [];
    
    console.log("Cart items:", cart);
    
    if (cart.length === 0) {
        showCartNotification('Your cart is empty. Add items to checkout.');
        console.log("Empty cart, cannot checkout");
        return false;
    }
    
    // Calculate total
    const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    
    console.log("Cart total:", total);
    
    // Create checkout session
    const checkoutSession = {
        cart: cart,
        total: total,
        timestamp: Date.now(),
        sessionId: 'tq_' + Date.now()
    };
    
    // Save to localStorage
    localStorage.setItem('checkoutSession', JSON.stringify(checkoutSession));
    
    console.log("Checkout session saved:", checkoutSession);
    
    // Close cart overlay
    closeCartOverlay();
    
    // Redirect to checkout page
    console.log("Redirecting to checkout.html...");
    window.location.href = 'checkout.html';
    
    return true;
}

// ========== UPDATE RENDER CART FUNCTION ==========
function renderCart() {
    const cartItemsContainer = document.querySelector('.cart-items');
    const cartSubtotalElement = document.querySelector('.cart-subtotal');
    const cartTotalElement = document.querySelector('.cart-total');
    const checkoutBtn = document.getElementById('proceed-to-checkout');
    
    if (!cartItemsContainer) return;
    
    if (cart.length === 0) {
        cartItemsContainer.innerHTML = `
            <div class="empty-cart-message">
                <i class="fas fa-shopping-basket"></i>
                <p>Your cart is empty</p>
                <a href="shop.html" class="btn btn-purple">Start Shopping</a>
            </div>
        `;
        if (cartSubtotalElement) cartSubtotalElement.textContent = 'â‚¦0.00';
        if (cartTotalElement) cartTotalElement.textContent = 'â‚¦0.00';
        
        // Disable checkout button when cart is empty
        if (checkoutBtn) {
            checkoutBtn.disabled = true;
            checkoutBtn.style.opacity = '0.6';
            checkoutBtn.style.cursor = 'not-allowed';
            checkoutBtn.innerHTML = '<i class="fas fa-shopping-bag"></i> Cart is Empty';
        }
        return;
    }
    
    // Enable checkout button when cart has items
    if (checkoutBtn) {
        checkoutBtn.disabled = false;
        checkoutBtn.style.opacity = '1';
        checkoutBtn.style.cursor = 'pointer';
        checkoutBtn.innerHTML = '<i class="fas fa-shopping-bag"></i> Proceed to Checkout';
    }
    
    let subtotal = 0;
    let cartHTML = '';
    
    cart.forEach(item => {
        const itemTotal = item.price * item.quantity;
        subtotal += itemTotal;
        
        cartHTML += `
            <div class="cart-item" data-id="${item.id}">
                <div class="cart-item-image">
                    <img src="${item.image}" alt="${item.name}">
                </div>
                <div class="cart-item-details">
                    <h4>${item.name}</h4>
                    <span class="cart-item-category">${item.category}</span>
                    <div class="cart-item-price">â‚¦${item.price.toFixed(2)}</div>
                </div>
                <div class="cart-item-actions">
                    <div class="cart-item-quantity">
                        <button class="quantity-btn minus" onclick="updateQuantity('${item.id}', ${item.quantity - 1})" ${item.quantity <= 1 ? 'disabled style="opacity:0.5"' : ''}>-</button>
                        <span class="quantity-value">${item.quantity}</span>
                        <button class="quantity-btn plus" onclick="updateQuantity('${item.id}', ${item.quantity + 1})">+</button>
                    </div>
                    <button class="remove-item" onclick="removeFromCart('${item.id}')">
                        <i class="fas fa-trash"></i> Remove
                    </button>
                </div>
            </div>
        `;
    });
    
    cartItemsContainer.innerHTML = cartHTML;
    if (cartSubtotalElement) cartSubtotalElement.textContent = `â‚¦${subtotal.toFixed(2)}`;
    if (cartTotalElement) cartTotalElement.textContent = `â‚¦${subtotal.toFixed(2)}`;
}
















// ========== TEST FUNCTIONS ==========
function testFirebase() {
  console.log("Testing Firebase connection...");
  
  if (!db) {
    console.error("Firebase database not initialized!");
    return;
  }
  
  db.collection('products').limit(1).get()
    .then((querySnapshot) => {
      console.log("Firebase connection successful!");
      console.log("Found", querySnapshot.size, "products");
      
      querySnapshot.forEach((doc) => {
        console.log("First product:", doc.data());
      });
    })
    .catch((error) => {
      console.error("Firebase error:", error);
    });
}

// Expose functions to global scope for onclick attributes
window.loadProductsFromFirebase = loadProductsFromFirebase;
window.testFirebase = testFirebase;
window.updateQuantity = updateQuantity;
window.removeFromCart = removeFromCart;
</script>
</body>
</html>